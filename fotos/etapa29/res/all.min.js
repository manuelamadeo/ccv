/* all.min.js - PhotoBlogger skin scripts */
var VER='1.3.1',DEBUG=false;
Texts={closeWindow:'Close window',okButton:'OK',warning:'Warning',error:'Error',addCart:'Add to Cart',added:'Added...',buyNow:'Buy Now',viewCart:'View Cart',emptyCart:'Empty Cart',items:'items',success:'Success',couponCode:'Coupon code',redeem:'Redeem',noSuch:'No such coupon exists!',expired:'The coupon code <b>{0}</b> has expired!',accepted:'The coupon code is accepted. You will get <b>{0}</b> discount the next time you add this item to the cart.',lowerThanCurrent:'This coupon offers lower discount than the current <b>{0}</b>.',higherThanPrice:'You can use this coupon only for items priced higher than <b>{0}</b>.',reclaimed:'This coupon has already been used!',select:'Select',all:'All',none:'None',shoppingcartInfo:'This item is placed into the &#34;Shopping cart&#34;. You can buy it by clicking the &#34;Buy now&#34; button after you quit the lightbox.',itemsInShoppingCart:'There are still unpaid items in the shopping cart!',stay:'Stay',leave:'Leave',close:'Close',slideshow:'Slideshow',pause:'Pause',download:'Download',print:'Print',buyImage:'Buy image',photoData:'Photo data',map:'Map',clickToOpen:'Click to open this document with the associated viewer',share:'Share',shareOn:'Share on',checkThisOut:'Found this page',localWarning:'Can&#39;t share local albums. Please upload your album first!',foundNTimes:'{0} image(s)',notFound:'not found',search:'Search',newImages:'New images',label:'Label',return:'return',today:'today',inTheLastDay:'in the last day',inThePastNDays:'in the past {0} days',inThePastNMonths:'in the past {0} months',inThePastNYears:'in the past {0} years',sinceMyLastVisit:'since my last visit',imagesAdded:'Images added',imagesModified:'Images modified',imagesTaken:'Images taken',locationWarning:'Works only when uploaded',cookiePolicyText:'This album uses cookies to remember user preferences. By using it, you agree to our use of cookies.',cookiePolicyAgree:'Got it',cookiePolicyLearnMore:'Learn more'};
!function(t,e,i,n){"use strict";function a(t){return("string"==typeof t||t instanceof String)&&(t=t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),t}var s=function(e){for(var i=e.length,n=t("head");i--;)0===n.has("."+e[i]).length&&n.append('<meta class="'+e[i]+'" />')};s(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),t(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof i.body&&FastClick.attach(i.body)});var r=function(e,n){if("string"==typeof e){if(n){var a;if(n.jquery){if(a=n[0],!a)return n}else a=n;return t(a.querySelectorAll(e))}return t(i.querySelectorAll(e))}return t(e,n)},o=function(t){var e=[];return t||e.push("data"),this.namespace.length>0&&e.push(this.namespace),e.push(this.name),e.join("-")},u=function(t){for(var e=t.split("-"),i=e.length,n=[];i--;)0!==i?n.push(e[i]):this.namespace.length>0?n.push(this.namespace,e[i]):n.push(e[i]);return n.reverse().join("-")},l=function(e,i){var n=this,a=function(){var a=r(this),s=!a.data(n.attr_name(!0)+"-init");a.data(n.attr_name(!0)+"-init",t.extend({},n.settings,i||e,n.data_options(a))),s&&n.events(this)};return r(this.scope).is("["+this.attr_name()+"]")?a.call(this.scope):r("["+this.attr_name()+"]",this.scope).each(a),"string"==typeof e?this[e].call(this,i):void 0},m=function(t,e){function i(){e(t[0])}function n(){if(this.one("load",i),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?void(t[0].complete||4===t[0].readyState?i():n.call(t)):void i()};e.matchMedia=e.matchMedia||function(t){var e,i=t.documentElement,n=i.firstElementChild||i.firstChild,a=t.createElement("body"),s=t.createElement("div");return s.id="mq-test-1",s.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(s),function(t){return s.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(a,n),e=42===s.offsetWidth,i.removeChild(a),{matches:e,media:t}}}(i),function(t){function i(){n&&(r(i),u&&t.fx.tick())}for(var n,a=0,s=["webkit","moz"],r=e.requestAnimationFrame,o=e.cancelAnimationFrame,u="undefined"!=typeof t.fx;a<s.length&&!r;a++)r=e[s[a]+"RequestAnimationFrame"],o=o||e[s[a]+"CancelAnimationFrame"]||e[s[a]+"CancelRequestAnimationFrame"];r?(e.requestAnimationFrame=r,e.cancelAnimationFrame=o,u&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,i())},t.fx.stop=function(){n=!1})):(e.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),s=e.setTimeout(function(){t(i+n)},n);return a=i+n,s},e.cancelAnimationFrame=function(t){clearTimeout(t)})}(t),e.Foundation={name:"Foundation",version:"5.5.1",media_queries:{small:r(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":r(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:r(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":r(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:r(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":r(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:r(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":r(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:r(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:t("<style></style>").appendTo("head")[0].sheet,global:{namespace:n},init:function(t,i,n,a,s){var o=[t,n,a,s],u=[];if(this.rtl=/rtl/i.test(r("html").attr("dir")),this.scope=t||this.scope,this.set_namespace(),i&&"string"==typeof i&&!/reflow/i.test(i))this.libs.hasOwnProperty(i)&&u.push(this.init_lib(i,o));else for(var l in this.libs)u.push(this.init_lib(l,i));return r(e).load(function(){r(e).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),t},init_lib:function(e,i){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),i&&i.hasOwnProperty(e)?("undefined"!=typeof this.libs[e].settings?t.extend(!0,this.libs[e].settings,i[e]):"undefined"!=typeof this.libs[e].defaults&&t.extend(!0,this.libs[e].defaults,i[e]),this.libs[e].init.apply(this.libs[e],[this.scope,i[e]])):(i=i instanceof Array?i:new Array(i),this.libs[e].init.apply(this.libs[e],i))):function(){}},patch:function(t){t.scope=this.scope,t.namespace=this.global.namespace,t.rtl=this.rtl,t.data_options=this.utils.data_options,t.attr_name=o,t.add_namespace=u,t.bindings=l,t.S=this.utils.S},inherit:function(t,e){for(var i=e.split(" "),n=i.length;n--;)this.utils.hasOwnProperty(i[n])&&(t[i[n]]=this.utils[i[n]])},set_namespace:function(){var e=this.global.namespace===n?t(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===n||/false/i.test(e)?"":e},libs:{},utils:{S:r,throttle:function(t,e){var i=null;return function(){var n=this,a=arguments;null==i&&(i=setTimeout(function(){t.apply(n,a),i=null},e))}},debounce:function(t,e,i){var n,a;return function(){var s=this,r=arguments,o=function(){n=null,i||(a=t.apply(s,r))},u=i&&!n;return clearTimeout(n),n=setTimeout(o,e),u&&(a=t.apply(s,r)),a}},data_options:function(e,i){function n(t){return!isNaN(t-0)&&null!==t&&""!==t&&t!==!1&&t!==!0}function a(e){return"string"==typeof e?t.trim(e):e}i=i||"options";var s,r,o,u={},l=function(t){var e=Foundation.global.namespace;return t.data(e.length>0?e+"-"+i:i)},m=l(e);if("object"==typeof m)return m;for(o=(m||":").split(";"),s=o.length;s--;)r=o[s].split(":"),r=[r[0],r.slice(1).join(":")],/true/i.test(r[1])&&(r[1]=!0),/false/i.test(r[1])&&(r[1]=!1),n(r[1])&&(r[1]=-1===r[1].indexOf(".")?parseInt(r[1],10):parseFloat(r[1])),2===r.length&&r[0].length>0&&(u[a(r[0])]=a(r[1]));return u},register_media:function(e,i){Foundation.media_queries[e]===n&&(t("head").append('<meta class="'+i+'"/>'),Foundation.media_queries[e]=a(t("."+i).css("font-family")))},add_custom_rule:function(t,e){if(e===n&&Foundation.stylesheet)Foundation.stylesheet.insertRule(t,Foundation.stylesheet.cssRules.length);else{var i=Foundation.media_queries[e];i!==n&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[e]+"{ "+t+" }")}},image_loaded:function(t,e){var i=this,n=t.length;0===n&&e(t),t.each(function(){m(i.S(this),function(){n-=1,0===n&&e(t)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(t){return e.matchMedia(t).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(jQuery,window,window.document);
var J={FOLDERS:"folders",NAME:"name",PATH:"path",THUMB:"thumb",IMAGE:"image",WIDTH:"width",HEIGHT:"height",ORIGINAL:"original",FOLDERS:"folders",OBJECTS:"objects",FILEDATE:"fileDate",COMMENT:"comment",TITLE:"title",COUNTERS:"counters",DEEPCOUNTERS:"deepCounters",FILESIZE:"fileSize",CATEGORY:"category",KEYWORDS:"keywords",CAMERA:"camera",VIDEO:"video",LEVEL:"level",PATHREF:"pathRef",RELPATH:"relPath",READY:"ready",SELECTED:"selected",ACTIVE:"active",IMAGECAPTION:"imageCaption",THUMBCAPTION:"thumbCaption",PHOTODATA:"photodata",LOCATION:"location",MODIFIEDDAYS:"modifiedDays",MOSTPHOTOS:"mostphotos",OBJ:"obj"},Album=function(t){var e,n,r,o,a,i={treeFile:"tree.json",dataFile:"data1.json",rootPath:"",relPath:"",lazy:!0},l={},u=[],h=function(t){return t.hasOwnProperty(J.ORIGINAL)?t[J.ORIGINAL][J.PATH]:t[J.NAME]},f=function(e){var n=t.inArray(e,u);return n>=0?n:u.push(e)-1},c=function(t){return u[t]},E=function(e){if(!e)return l;if(t.isNumeric(e)){if(e>u.length)return console.log("Error: out of bounds path reference!"),null;e=u[e]}"/"===e[e.length-1]&&(e=e.substring(0,e.length-1));var n,r,o,a,i=l,h=e.split("/");for(n=0,o=h.length;o>n;n++){if(!i.hasOwnProperty(J.FOLDERS))return null;for(r=0,a=i[J.FOLDERS].length;a>r;r++)if(i[J.FOLDERS][r][J.PATH]===h[n]){i=i[J.FOLDERS][r];break}if(r===a)return null}return n===o?i:null},s=function(){var t=function(e,r,o){e[J.LEVEL]=r,o.length&&(o+="/");var a=r?e[J.PATH]:"";e[J.PATHREF]=f(o+a);var l;if(l=i.relPath.length?e===n?"":0===a.indexOf(i.relPath)?a.substring(i.relPath.length):i.rootPath+"/"+(o+a):o+a,e[J.RELPATH]=f(l),e.hasOwnProperty(J.FOLDERS)){pr=f(o);for(var u=0,h=e[J.FOLDERS].length;h>u;u++)t(e[J.FOLDERS][u],r+1,o+a)}};t(l,0,"")},O=function(e){return t.getJSON((i.rootPath?i.rootPath+"/":"")+i.treeFile).done(function(r){l=r,n=E(i.relPath),null===n&&(console.log("Error: can't find folder \""+i.relPath+'" in the database! Reverting to root folder.'),n=""),s(),t.isFunction(e)&&e.call(this)}).fail(function(){console.log('Error loading "'+i.treeFile+"\". Please note, JSON support is required for PhotoBlogger, but it's blocked in Chrome and IE when viewing local albums. The uploaded album will work fine, however.")})},g=function(e,n){if(!e)return void console.log('Error: loadData("null")!');if(e.hasOwnProperty(J.OBJECTS))return t.isFunction(n)&&n.call(this,e[J.OBJECTS]),!0;var r=c(e[J.RELPATH]);o||(o=[]),o.push(t.getJSON((r?r+"/":"")+i.dataFile).done(function(r){if(r.hasOwnProperty(J.OBJECTS)){e[J.OBJECTS]=r[J.OBJECTS];for(var o=0,a=e[J.OBJECTS].length;a>o;o++)e[J.OBJECTS][o][J.PATHREF]=e[J.PATHREF],e[J.OBJECTS][o][J.RELPATH]=e[J.RELPATH]}t.isFunction(n)&&n.call(this,e[J.OBJECTS])}))},d=function(t,e){if(g(t),e&&t.hasOwnProperty(J.FOLDERS))for(var n=0,r=t[J.FOLDERS].length;r>n;n++)d(t[J.FOLDERS][n])},T=function(u){if(!e){e=new Date,t.extend(i,u),a=!1,"."===i.rootPath&&(i.rootPath="");var h=function(){o=[],d(i.lazy?n:l,!i.lazy),t.when.apply(t,o).done(function(){var l=new Date;console.log(o.length+" folder(s) loaded: "+(l-e)+"ms"),a=!0,o=null,r=n.hasOwnProperty(J.OBJECTS)?0:null,t.isFunction(i.ready)&&i.ready.call(this)})};O(h)}},P=function(){var t=[];if(n.hasOwnProperty(J.OBJECTS))for(var e=n[J.OBJECTS],r=0,o=e.length;o>r;r++)"image.audio.video.other".indexOf(e[r][J.CATEGORY])>=0&&t.push(e[r]);return t},A=function(e){if(typeof e!==UNDEF&&e.hasOwnProperty("range")){var r,a,e=t.extend({sort:!0,depth:"current"},e),i=[],u=("tree"===e.depth?l:n,function(t){if(t&&t.length){var e,n,o=t.length;for(e=0;o>e;e++)n=t[e],"webPage"!==n[J.CATEGORY]&&"folder"!==n[J.CATEGORY]&&n.hasOwnProperty(J.MODIFIEDDAYS)&&n[J.MODIFIEDDAYS]>=r&&n[J.MODIFIEDDAYS]<=a&&i.push(n)}}),h=function(){i.sort(function(t,e){return e[J.MODIFIEDDAYS]-t[J.MODIFIEDDAYS]})},f=function(t){if(g(t,u),"current"!==e.depth&&t.hasOwnProperty(J.FOLDERS))for(var n=0,r=t[J.FOLDERS].length;r>n;n++)f(t[J.FOLDERS][n])};e.end?(a=e.end,r=a-e.range):(r=Math.ceil(new Date/864e5),r-=e.hasOwnProperty("start")?e.start:e.range,a=r+e.range),o=[],f("tree"===e.depth?l:n),t.isFunction(e.ready)&&(o.length?t.when.apply(t,o).done(function(){e.sort&&h(),e.ready.call(i,e)}):(e.sort&&h(),e.ready.call(i,e)))}},p=function(e){if(typeof e!==UNDEF&&e.hasOwnProperty("terms")){var e=t.extend({fields:"creator,keywords,title,comment",depth:"current",exact:!1},e),r=[],a=e.fields.split(","),i=a.length,u=e.terms.split(","),h=u.length,f=("tree"===e.depth?l:n,function(t){if(t&&t.length){var n,o,l,f,c=t.length;for(n=0;c>n;n++)o=t[n],"webPage"!==o[J.CATEGORY]&&"folder"!==o[J.CATEGORY]&&!function(){for(l=0;i>l;l++)if(o.hasOwnProperty(a[l]))for(f=0;h>f;f++)if(!e.exact&&u[f].testIn(o[a[l]])||u[f].testExactMatch(o[a[l]]))return void r.push(o)}()}}),c=function(t){if(g(t,f),"current"!==e.depth&&t.hasOwnProperty(J.FOLDERS))for(var n=0,r=t[J.FOLDERS].length;r>n;n++)c(t[J.FOLDERS][n])};o=[],c("tree"===e.depth?l:n),t.isFunction(e.ready)&&(o.length?t.when.apply(t,o).done(function(){e.ready.call(r,e)}):e.ready.call(r,e))}},D=function(e){var e=t.extend({fields:"creator,keywords",depth:"current"},e),r=[],a=t.isArray(e.fields)?e.fields:e.fields.split(","),i=a.length,u="name"===e.sort,h=("tree"===e.depth?l:n,function(t){for(var e,n=t.toString().split(","),o=0,a=n.length;a>o;o++)if(e=n[o].toString().trim(),e.length){for(var i=0,l=r.length;l>i&&r[i][0]!==e;i++);i===l?r.push([e,1]):r[i][1]++}}),f=function(t){if(t&&t.length){var e,n,r,o=t.length;for(e=0;o>e;e++)for(n=t[e],r=0;i>r;r++)n.hasOwnProperty(a[r])&&h(n[a[r]])}},c=function(t){if(g(t,f),"current"!==e.depth&&t.hasOwnProperty(J.FOLDERS))for(var n=0,r=t[J.FOLDERS].length;r>n;n++)c(t[J.FOLDERS][n])},E=function(){r.sort(function(t,e){return u?(""+t[0]).localeCompare(""+e[0]):e[1]-t[1]})};o=[],c("tree"===e.depth?l:n),t.isFunction(e.ready)&&(o.length?t.when.apply(t,o).done(function(){e.sort&&E(),e.ready.call(r,e)}):(e.sort&&E(),e.ready.call(r,e)))};return{init:T,getTree:function(){return l},getMakeDate:function(){return new Date(l[J.FILEDATE])},getPaths:function(){return u},getCurrentFolder:function(){return n},getObjects:function(){return n.hasOwnProperty(J.OBJECTS)?n[J.OBJECTS]:[]},getImages:P,collectTags:D,collectItems:p,collectByDate:A,getFolderPath:function(t){return c(t[J.PATHREF]||0)},getItemName:h,getItemPath:function(t){var e=c(t[J.PATHREF]||0);return(e.length?e+"/":"")+t[J.PATH]},getThumbPath:function(t){var e=c(t[J.RELPATH]);return(e.length?e+"/":"")+t[J.THUMB][J.PATH]},getImagePath:function(t){var e=c(t[J.RELPATH]);return(e.length?e+"/":"")+t[J.IMAGE][J.PATH]},getSourcePath:function(t){var e=c(t[J.RELPATH]);return(e.length?e+"/":"")+(t.hasOwnProperty(J.ORIGINAL)?t[J.ORIGINAL][J.PATH]:t[J.IMAGE][J.PATH])},getAbsolutePath:function(t){var e=c(t[J.RELPATH]);return(e.length?e.fullUrl():window.location.href.getDir())+(window.location.href.getFile()||"index.html")+"#img="+h(t)},getAbsoluteImagePath:function(t){var e=c(t[J.RELPATH]);return(e.length?e.fullUrl():window.location.href.getDir())+t[J.IMAGE][J.PATH]},isImage:function(t){return t.hasOwnProperty(J.CATEGORY)&&"image"===t[J.CATEGORY]},isAudio:function(t){return t.hasOwnProperty(J.CATEGORY)&&"audio"===t[J.CATEGORY]},isVideo:function(t){return t.hasOwnProperty(J.CATEGORY)&&"video"===t[J.CATEGORY]},getTitle:function(t){return t[J.TITLE]||""},getName:function(t){return t[J.NAME]||""},getComment:function(t){return t[J.COMMENT]||""},getAttr:function(t,e){return t.hasOwnProperty(e)?t[e]:null}}}(jQuery);
window.console=window.console||function(){var t={};return t.log=t.warn=t.debug=t.info=t.error=t.time=t.dir=t.profile=t.clear=t.exception=t.trace=t.assert=function(){},t}();var UNDEF="undefined",NOLINK="javascript:void(0)",LOCAL=0===location.protocol.indexOf("file:"),VEND=function(t){return t.indexOf("Trident")>0?"ms":t.indexOf("AppleWebKit")>0?"webkit":t.indexOf("Gecko")>0?"moz":t.indexOf("Presto")>0?"o":t.indexOf("Blink")>0?"webkit":""}(navigator.userAgent);String.wsp=[],String.wsp[9]=!0,String.wsp[10]=!0,String.wsp[11]=!0,String.wsp[12]=!0,String.wsp[13]=!0,String.wsp[32]=!0,String.wsp[133]=!0,String.wsp[160]=!0,String.wsp[5760]=!0,String.wsp[6158]=!0,String.wsp[8192]=!0,String.wsp[8193]=!0,String.wsp[8194]=!0,String.wsp[8195]=!0,String.wsp[8196]=!0,String.wsp[8197]=!0,String.wsp[8198]=!0,String.wsp[8199]=!0,String.wsp[8200]=!0,String.wsp[8201]=!0,String.wsp[8202]=!0,String.wsp[8203]=!0,String.wsp[8232]=!0,String.wsp[8233]=!0,String.wsp[8239]=!0,String.wsp[8287]=!0,String.wsp[12288]=!0,String.prototype.trim=function(){var t=this+"",n=t.length;if(n){var e=String.wsp,r=0;for(--n;n>=0&&e[t.charCodeAt(n)];)--n;for(++n;n>r&&e[t.charCodeAt(r)];)++r;t=t.substring(r,n)}return t},String.prototype.trunc=function(t){var n=this+"";if(n.length<=t)return n.toString();var e=n.substring(0,t-1),r=e.lastIndexOf(" ");return(r>6&&e.length-r<20?e.substring(0,r):e)+"..."},String.prototype.startsWith=function(t){return 0===(this+"").indexOf(t)},String.prototype.endsWith=function(t){return(this+"").substring(this.length-t.length)===t},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.unCamelCase=function(){return this.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},String.prototype.getExt=function(){var t=this+"",n=t.lastIndexOf(".");return 0>=n||n>=t.length-1?"":t.substring(n+1).toLowerCase()},String.prototype.hasExt=function(t){var n=this+"",e=n.lastIndexOf(".");return e>=0?(n=n.substring(e+1).toLowerCase(),(t+",").indexOf(n+",")>=0):!1},String.prototype.replaceExt=function(t){var n=this+"",e=n.lastIndexOf(".");return 0>=e?n:n.substring(0,e+1)+t},String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")},String.prototype.getDir=function(){var t=(this+"").split("#")[0];return t.substring(0,t.lastIndexOf("/")+1)},String.prototype.getFile=function(){var t=(this+"").split("#")[0];return t.substring(t.lastIndexOf("/")+1)},String.prototype.getRelpath=function(t){var n=this+"",e=n.lastIndexOf("#");for(-1===e?e=n.length-1:e--;e>=0&&("/"!==n[e]||0!==t--);e--);return n.substring(e+1)},String.prototype.fixUrl=function(){for(var t,n,e=this+"";(t=e.indexOf("../"))>0;){if(1===t||-1===(n=e.lastIndexOf("/",t-2)))return e.substring(t+3);e=e.substring(0,n)+e.substring(t+2)}return e},String.prototype.fullUrl=function(){var t=this+"";return t.match(/^(http|ftp|file)/)||(t=window.location.href.getDir()+t),t.fixUrl()},String.prototype.cleanupHTML=function(){for(var t=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']],n=this+"",e=t.length-1;e>=0;e--)n=n.replace(t[e][0],t[e][1]);return n},String.prototype.stripHTML=function(){return(this+"").replace(/<br\/?>/gi,"/ ").replace(/<\/[^>]+>/gi," ").replace(/<[^>]+>/gi,"").trim()},String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")},String.prototype.appendSep=function(t,n){return(this.length?this+(n||" &middot; "):"")+t},String.prototype.rgb2hex=function(){var t=this+"";if("#"===t.charAt(0)||"transparent"===t)return t;var n,e=t.match(/\d+/g),r="";if(e){for(var i=0;i<e.length&&3>i;i++)n=parseInt(e[i],10).toString(16),r+=(n.length<2?"0":"")+n;return"#"+r}return"transparent"},String.prototype.template=function(t){if(typeof t===UNDEF||!this)return this;!isNaN(parseFloat(t))&&isFinite(t)&&(t+="");var n=this+"";if(t.constructor===Array)for(var e=0;e<t.length;e++)n=n.replace(new RegExp("\\{"+e+"\\}","gi"),t[e]);else n=n.replace(/\{0\}/gi,t);return n},String.prototype.getSearchTerms=function(){var t=this+"";if(-1===t.indexOf('"'))return t.split(" ");var n,e=[];do{if((n=t.indexOf('"'))>0&&e.push.apply(e,t.substring(0,n).split(" ")),t=t.substring(n+1),n=t.indexOf('"'),0>n){e.push(t);break}e.push(t.substring(0,n)),t=t.substring(n+1)}while(t.length);return e},String.prototype.objectify=function(){if(!this||!this.length)return this;var t=this+"";("?"===t.charAt(0)||"#"===t.charAt(0))&&(t=t.substring(1));for(var n,e={},r=t.split("&"),i=0,o=r.length;o>i;i++)n=r[i].split("="),n.length>1&&(e[n[0]]=decodeURIComponent(n[1]));return e},String.prototype.testIn=function(t){return"string"!=typeof t&&(t+=""),new RegExp(this,"i").test(t)},String.prototype.testExactMatch=function(t){if(t.constructor!==Array)return this==t+"";for(var n=0,e=t.length;e>n;n++)if(this==t[n])return!0;return!1},Math.minMax=function(t,n,e){return n=isNaN(n)?parseFloat(n):n,t>n?t:n>e?e:n};var isEmpty=function(t){if(null==t)return!0;for(var n in t)return!1;return!0},paramize=function(t){if("number"==typeof t)return""+t;if("string"==typeof t)return t;if("object"==typeof t){var n="";for(var e in t)null!==t[e]&&(n+="&"+e+"="+encodeURIComponent(t[e]));if(n.length)return n.substring(1)}return""},getCoords=function(t){return t.touches?1==t.touches.length?{x:t.touches[0].clientX,y:t.touches[0].clientY}:t.changedTouches&&1==t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:null:{x:t.clientX,y:t.clientY}},hasTouch="ontouchstart"in window,hasPointers=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,pointerDownEvent=hasPointers?window.navigator.pointerEnabled?"pointerdown":"MSPointerDown":null,pointerMoveEvent=hasPointers?window.navigator.pointerEnabled?"pointermove":"MSPointerMove":null,pointerUpEvent=hasPointers?window.navigator.pointerEnabled?"pointerup":"MSPointerUp":null,clickEvent=pointerUpEvent||"click",wasTouched=function(t){return hasTouch?!0:hasPointers&&void 0!==typeof t&&t.hasOwnProperty("pointerType")?"touch"===t.pointerType?!0:4!==t.pointerType:!1},noAction=function(t){return t.stopPropagation(),t.preventDefault(),!1},translate=function(t,n){if(t=t.trim(),typeof Texts!==UNDEF&&Texts.hasOwnProperty(t))return Texts[t];if(typeof n!==UNDEF)return DEBUG&&console&&console.log("Using default translation: "+t+"="+n),n;DEBUG&&console&&console.log("Missing translation: "+t);var e=t.replace(/([A-Z])/g," $1").toLowerCase();return e[0]=e.charAt(0).toUpperCase(),e},getKeys=function(t,n){var e,r={},i=t.split(","),o=i.length;for(e=0;o>e;e++)r[i[e]]=translate(i[e],n[i]);return r},getTranslations=function(t){var n,e={};for(n in t)e[n]="object"==typeof t[n]?getTranslations(t[n]):translate(n,t[n]);return e},getRelativeDate=function(t){if(!t)return translate("today");if(1===t)return translate("yesterday");var n,e;return t>=730?(n=translate("yearsAgo"),e=Math.round(t/365)):t>=60?(n=translate("monthsAgo"),e=Math.round(t/30.5)):(n=translate("daysAgo"),e=t),n.replace("{0}",e)},getTimespan=function(t){if(!t)return translate("today");if(1===t)return translate("yesterday");var n,e;return t>=730?(n=translate("inThePastNYears"),e=Math.round(t/365)):t>=60?(n=translate("inThePastNMonths"),e=Math.round(t/30.42)):(n=translate("inThePastNDays"),e=t),n.replace("{0}",e)},extend=function(){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(arguments[0][n]=arguments[t][n]);return arguments[0]},addParam=function(t,n){if(Modernizr.history){var e=window.location.hash,r=e;r?("#"===r.charAt(0)&&(r=r.substring(1)),r=r.objectify(),r=extend(r,t)):r=t,r="#"+paramize(r),r!==e&&history.pushState(null,"undefined"==typeof n?null:n,isEmpty(r)?"index.html":r)}},setParam=function(t,n){if(Modernizr.history){var e="#"+paramize(t);e!==window.location.hash&&history.pushState(null,"undefined"==typeof n?null:n,isEmpty(e)?"index.html":e)}},removeParam=function(t,n){if(Modernizr.history){var e=window.location.hash;e&&("undefined"==typeof t?e=null:("#"===e.charAt(0)&&(e=e.substring(1)),e=e.objectify(),e.hasOwnProperty(t)&&delete e[t]),history.pushState(null,"undefined"==typeof n?null:n,isEmpty(e)?"index.html":"#"+paramize(e)))}},removeSearch=function(t){Modernizr.history&&history.replaceState(null,t||null,window.location.href.replace(window.location.search,""))},readParam=function(){return window.location.hash.objectify()},printImage=function(t,n,e){if(t){var r=window.open("about:blank","print","location=no,status=no,titlebar=no");r.document.open(),r.document.write('<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8">\n<title>'+(n||"Print")+'</title>\n<script>printOut=function(){window.print();window.close();}</script>\n<style>body{margin:0;padding:0;text-align:center;overflow:hidden;}\nimg{display:block;width:100%;height:auto;vertical-align:top;}</style>\n</head>\n<body onLoad="setTimeout(printOut,100)"><img src="'+t+'">'+(e||"")+"</body>\n</html>"),r.document.close()}},log=function(){},DEBUG="undefined"==typeof DEBUG?!1:DEBUG;!function(t,n){var e,r,i=!1,o=1;log=function(n){var a=function(n){if(t.isArray(n)){for(var e="",r=0;r<n.length;r++)e+=a(n[r])+", ";return"[ "+e.substring(0,e.length-2)+" ]"}if("object"==typeof n){var e="";for(var r in n)e+=r+": "+a(n[r])+",<br>";return"{ "+e+" }"}return isNaN(n)?n:parseInt(n)===n?n:n.toFixed(4)};DEBUG&&!i&&(e||(e=t('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:0.75em;z-index:99999"></div>').hover(function(){i=!0},function(){i=!1}).appendTo("body")),n===r?e.children(":first").empty().html(r+" <sup>("+ ++o+")</sup>"):(t('<div style="height:3em;overflow:auto;">'+a(n)+"</div>").prependTo(e),r=n,o=1))},t.fn.logEvents=function(n){if(DEBUG){var e=n||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";return this.each(function(){t(this).on(e,function(t){return typeof t===UNDEF?log("Undefined event"):t.target?"log"!==t.target.id&&log(t.type+' <span style="padding:0 4px;font-size:0.75em;background-color:#000;border-radius:4px;"><b>'+(t.target.nodeName?t.target.nodeName.toLowerCase():"???")+"</b>"+(t.target.id?":"+t.target.id:"")+"</span>"+(t.relatedTarget?' <span style="padding:0 4px;font-size:0.6em;background-color:#800;border-radius:4px;"><b>'+t.relatedTarget.nodeName.toLowerCase()+"</b>"+(t.relatedTarget.id?":"+t.relatedTarget.id:"")+"</span>":"")):log("No event target!"),!0})})}},t.fn.logCss=function(n,e,r){if(DEBUG){r=r||20,e=e||2e3;var i=new Date;return this.each(function(){var o=t(this),a=function(t){var n=new Date-i;log(n+"&nbsp;::&nbsp;"+t+" = "+o.css(t)),n>e&&clearInterval(s)},s=setInterval(function(){if(t.isArray(n))for(var e=0;e<n.length;e++)a(n[e]);else a(n)},r)})}},t.when.all===n&&(t.when.all=function(n){var e=new t.Deferred;return t.when.apply(t,n).then(function(){e.resolve(Array.prototype.slice.call(arguments))},function(){e.fail(Array.prototype.slice.call(arguments))}),e}),loadMap=function(t){if("undefined"==typeof google||!google.maps){var n=document.createElement("script");return n.type="text/javascript",n.src="https://maps.googleapis.com/maps/api/js?"+("undefined"==typeof googleApiKey?"":"key="+googelApiKey)+"&sensor=false&callback=showMap",t.attr("id","map-canvas"),void document.body.appendChild(n)}showMap(t)},showMap=function(n){if(n=n||t("#map-canvas")){var e=n.data("location");if(e){e=e.split(",");{var r=new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])),i=new google.maps.Map(n[0],{center:r,zoom:n.data("map-zoom")||12,mapTypeId:n.data("map-type")||google.maps.MapTypeId.ROADMAP,panControl:!1});new google.maps.Marker({position:r,map:i})}}}}}(jQuery);
!function(e){var t=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(e){return!1}}();e.cookie=function(r,n,o){var i,a,l="; ",g=function(e){return/^(true|yes)$/.test(e)?!0:/^(false|no)$/.test(e)?!1:/^([\d.]+)$/.test(e)?parseFloat(e):e};if(arguments.length>1)return a=new Date,null===n?t?localStorage.removeItem(r):document.cookie=encodeURIComponent(r)+"=; expires="+a.toGMTString()+"; path=/":/^(string|number|boolean)$/.test(typeof n)&&(a.setTime(a.getTime()+1e3*("number"!=typeof o?3600:o)),t?localStorage.setItem(r,String(n)+l+String(a.getTime())):document.cookie=encodeURIComponent(r)+"="+String(n)+"; expires="+a.toGMTString()+"; path=/"),n;if(r)if(t){if(i=localStorage.getItem(r)){if(i=i.split(l),!(e.isArray(i)&&i.length>1))return g(i);if(a=new Date,a.getTime()<parseInt(i[1],10))return g(i[0]);localStorage.removeItem(r)}}else{var m;i=document.cookie.split(";"),r+="=";for(var u=0;u<i.length;u++)m=i[u].trim(),0===m.indexOf(r)&&(m=m.substring(r.length),g(m))}return null}}(jQuery);
!function(e,t){"use strict";e.fn.renderShares=function(a){a=e.extend({className:"shares",sites:"facebook,twitter,googlePlus,tumblr"},a);var r=e(this),n="facebook,twitter,googlePlus,tumblr,printerest,digg,stumbleupon,reddit,email",i=a.sites.split(","),o=getTranslations({share:"Share",shareOn:"Share on",checkThisOut:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"}),s=encodeURIComponent(a.callAction||o.checkThisOut),c=(a.label||o.share,function(r,n){n="undefined"!=typeof n?e.extend(a,n):a,n.hasOwnProperty("description")&&(n.description=n.description.stripHTML()),n.hasOwnProperty("title")&&(n.title=n.title.stripHTML());var i,o=n.href||t.location.href,c=encodeURIComponent(o),l=encodeURIComponent(n.title||e("meta[name=title]").attr("content")||e("title").text()||""),u=encodeURIComponent(n.description||e("meta[name=description]").attr("content")||""),d=n.image||e("link[rel=image_src]").attr("href")||"",h=encodeURIComponent(d);d.startsWith("http")||(d=o.fullUrl()+d,h=encodeURIComponent(d)),p.find("a").each(function(){var t=e(this);switch(t.data("share")){case"facebook":if("undefined"!=typeof FB)return void t.off("click.share").on("click.share",function(){return FB.ui({method:"feed",link:o,caption:n.title||e("meta[name=title]").attr("content")||e("title").text()||"",description:n.description||e("meta[name=description]").attr("content")||"",picture:d}),!1});i="http://www.facebook.com/sharer.php?s=100&p%5Burl%5D="+c+"&p%5Bimages%5D%5B0%5D="+h+"&p%5Btitle%5D="+l;break;case"twitter":i="http://twitter.com/home?status="+l+": "+c;break;case"googlePlus":i="https://plus.google.com/share?url="+c;break;case"tumblr":i="http://www.tumblr.com/share/link?url="+c+"&name="+l;break;case"pinterest":i="http://pinterest.com/pin/create/button/?url="+c+"&media="+h+"&description="+l;break;case"digg":i="http://digg.com/submit?url="+o;break;case"stumbleupon":i="http://www.stumbleupon.com/submit?url="+o+"&title="+l;break;case"reddit":i="http://www.reddit.com/submit?url="+o;break;case"email":t.attr({href:"mailto:?subject="+s+"&body="+l+"%0D%0A"+u+"%0D%0A"+o.replace(/%/g,"%25")});default:return}t.attr({href:i,target:"_blank"})})}),l=function(){var t,a,r;for(r=0;r<i.length;r++)a=i[r],n.indexOf(a)>=0&&(t=e("<a>",{"class":"icon-"+a.unCamelCase(),title:o.shareOn+" "+a.capitalize()}).data("share",a).appendTo(p));c()},p=e("<div>",{"class":a.className});return r.append(p),l(),r.on("updateLinks",c),hasTouch||p.children("a").addTooltip(),this}}(jQuery,window,document);
!function(i,t,o,n){"use strict";var e,s,a=function(){var i=(o.body||o.documentElement).style;if(i.webkitTransition!==n)e="-webkit-",s="webkitTransitionEnd";else if(i.MozTransition!==n)e="-moz-",s="transitionend";else if(i.OTransition!==n)e="-o-",s="oTransitionEnd";else{if(i.transition===n)return!1;e="",s="transitionend"}return!0},r="ease-out",c=a(),f={left:0,top:0,center:.5,middle:.5,right:1,bottom:1};i.fn.translateX=function(t,o){var s={};return c&&(s[e+"transform"]="translateX("+t+"px)",s[e+"transition"]=e+"transform"+(o?" "+o+"ms ease-out":"")),this.each(function(){var e=i(this);if(c)e.css(s);else{var a=e.data("leftPos");a===n&&e.data("leftPos",a=e.position().left),s.left=a+t,o?e.animate(s,o):e.css(s)}})},i.fn.translateXAndFade=function(t,o,a,r){var f={opacity:o};return c&&(f[e+"transform"]="translateX("+t+"px)",f[e+"transition-property"]=e+"transform, opacity",f[e+"transition-duration"]=a+"ms",f[e+"transition-timing-function"]="ease-out"),this.each(function(){var o=i(this);if(c)"function"==typeof r&&o.one(s,r),o.css(f);else{var e=o.data("leftPos");e===n&&o.data("leftPos",e=o.position().left),f.left=e+t,a?o.animate(f,a,r):(o.css(f),"function"==typeof r&&setTimeout(function(){r.call(o[0])},50))}})},i.fn.opacity=function(t,o,a,f,l){var u=i(this);if(t===n||"boolean"==typeof t)return u.css("opacity");var p=!1,g={},m=function(){p||(p=!0,i.isFunction(l)&&l.call(u[0]))};return i.isFunction(o)?(l=o,a=r,o=n):i.isFunction(a)?(l=a,a=r):i.isFunction(f)&&(l=f,f=!1),"boolean"==typeof a&&(f=a,a=r),"boolean"==typeof o&&(f=o,o=n),u.css("opacity")===t?(i.isFunction(l)&&setTimeout(function(){l.call(u[0])},50),this):(g.opacity=t,c&&!f?o?(g[e+"transition"]="opacity "+o+"ms "+a,u.one(s,m),setTimeout(m,o+50),u.css(g)):(g[e+"transition"]="none",u.css(g),i.isFunction(l)&&setTimeout(function(){l.call(u[0])},50)):o?u.animate(g,o,m):(u.css(g),i.isFunction(l)&&setTimeout(function(){l.call(u[0])},50)),this)},i.fn.transform=function(t,o,a,l,u){var p=i(this),g=p.data("transform")||{origo:[0,0],position:[0,0],origin:[.5,.5],baseSize:[p.width(),p.height()],baseScale:[1,1],scale:[1,1],rotate:0};if("object"!=typeof t)return g;arguments.length>1?("function"==typeof o?(u=o,a=r,o=n):"function"==typeof a?(u=a,a=r):"function"==typeof l&&(u=l,l=!1),"boolean"==typeof a&&(l=a,a=r),"boolean"==typeof o&&(l=o,o=n)):a=r;var m,y=!1,b={},d=function(){setTimeout(function(){y||(y=!0,"function"==typeof u&&u.call(p[0]))},20)};if(t.opacity!==n&&(b.opacity=t.opacity),t.origo){if(!c||l){var h=p.data("originalPosition");h||(h=[p.position().left,p.position().top],p.data("originalPosition",h)),t.origo[0]+=h[0],t.origo[1]+=h[1]}}else t.origo=g.origo;return t.baseScale?"number"==typeof t.baseScale&&(t.baseScale=[t.baseScale,t.baseScale]):t.baseScale=g.baseScale,t.baseSize?t.scale||t.size||(t.scale=[1,1]):t.baseSize=g.baseSize,t.position?(t.position[0]===n&&(t.position[0]=g.position[0]),t.position[1]===n&&(t.position[1]=g.position[1])):t.position=g.position,t.origin?("string"==typeof t.origin[0]&&(t.origin[0]=f[t.origin[0]]),"string"==typeof t.origin[1]&&(t.origin[1]=f[t.origin[1]])):t.origin=g.origin,t.scale?"number"==typeof t.scale&&(t.scale=[t.scale,t.scale]):t.scale=t.size?[t.size[0]/t.baseSize[0],t.size[1]/t.baseSize[1]]:g.scale,m=[t.scale[0]*t.baseScale[0],t.scale[1]*t.baseScale[1]],p.data("transform",t),c&&!l?((t.origin[0]!==g.origin[0]||t.origin[1]!==g.origin[1])&&(b[e+"transform-origin"]=100*t.origin[0]+"% "+100*t.origin[1]+"%"),b[e+"transform"]="translate("+(t.origo[0]+t.position[0])+"px,"+(t.origo[1]+t.position[1])+"px)"+(1===m[0]&&1===m[1]?"":" scale("+m[0]+","+m[1]+")")+(t.rotate?" rotate("+t.rotate+"deg)":""),o?(b[e+"transition-property"]=e+"transform"+(t.opacity!==n?", opacity":""),b[e+"transition-duration"]=o+"ms",a&&(b[e+"transition-timing-function"]=a),"function"==typeof u&&(p.one(s,d),setTimeout(d,o+50)),p.css(b)):(b[e+"transition"]="none",p.css(b),"function"==typeof u&&setTimeout(function(){u.call(p[0])},50))):(b.left=t.origo[0]+t.position[0],b.top=t.origo[1]+t.position[1],t.size!==n?(b.width=t.size[0],b.height=t.size[1]):(b.width=t.baseSize[0]*m[0],b.height=t.baseSize[1]*m[1],b.left-=(b.width-t.baseSize[0])*t.origin[0],b.top-=(b.height-t.baseSize[1])*t.origin[1]),o?p.animate(b,o,u):(p.css(b),"function"==typeof u&&setTimeout(function(){u.call(p[0])},50))),this}}(jQuery,window,document);
!function(e,n,t){"use strict";e.fn.swipe=function(o){o=e.extend({onSwipedLeft:!1,onSwipedRight:!1,onSmallSwipe:!1,onFinished:!1,treshold:50,swipeoutSpeed:300},o);var i=function(o){o&&e(n).add(t).off("."+o)};return this.each(function(){var n,t=e(this),a=e(this).data("lsw_ns"),u=0,r=0,s=null,u=function(e){return e.originalEvent.touches&&e.originalEvent.touches.length>1?!0:(t.stop(!0,!1),n=(new Date).getTime(),u=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,t.on("mousemove."+a,l),!1)},l=function(e){return e.originalEvent.touches&&e.originalEvent.touches.length>1?!0:(r=(e.originalEvent.pageX||e.originalEvent.touches[0].pageX)-u,t.translateX(r),!1)},p=function(i){if(i.preventDefault(),e(this).off("mousemove."+a),Math.abs(r)>o.treshold){var u=(new Date).getTime()-n,l=r*(1+o.swipeoutSpeed/u);t.translateXAndFade(l,0,o.swipeoutSpeed),s=setTimeout(function(){"function"==typeof o.onFinished&&o.onFinished.call(t[0])},o.swipeoutSpeed+20),r>0?"function"==typeof o.onSwipedRight&&o.onSwipedRight.call(t[0]):"function"==typeof o.onSwipedLeft&&o.onSwipedLeft.call(t[0])}else t.translateX(0,100),"function"==typeof o.onSmallSwipe&&o.onSmallSwipe.call(t[0]);return!1};i(a),e(this).data("lsw_ns","lsw_"+Math.floor(1e4*Math.random())),t.on("touchstart."+a+(pointerDownEvent?" "+pointerDownEvent+"."+a:"")+" dragstart."+a,u).on("touchmove."+a+(pointerMoveEvent?" "+pointerMoveEvent+"."+a:""),l).on("touchend."+a+" touchcancel."+a+(pointerUpEvent?" "+pointerUpEvent+"."+a:"")+" mouseup."+a+" dragcancel."+a,p).on("removeSwipe."+a,function(){t.off("."+a),i(a)})})}}(jQuery,window,document);
!function(t,e,o,n){"use strict";t.fn.lightbox=function(a){a=t.extend({},t.fn.lightbox.defaults,a);var i,s,d,l,r=getTranslations(t.fn.lightbox.text),c=t([]),u=t(),h=t(),p=t(),f=t(),g=!0,m=!1,b=!1,T=!1,v=!1,w=t(this).data("llb_ns"),x=hasTouch?"touchend":clickEvent,A=a.hasOwnProperty("extraSizes")?a.extraSizes.split(/,\s*/):!1,O=function(n){t(e).add(o).off("."+n),t("#"+n).remove()},y=function(){var t=h.data("size")||[h.width(),h.height()],e=Math.min(s*a.fitRatio/t[0],d*a.fitRatio/t[1]);(1>e||!m&&!T&&a.fitImages)&&(t[0]*=e,t[1]*=e),h.stop(!0,!1).animate({left:(s-t[0])/2,top:(d-t[1])/2,width:t[0],height:t[1]})},I=function(o){if("number"!=typeof o&&(o=c.index(o)),0>o||o>c.length)return 0>o&&a.onBeforeFirst!==!1?a.onBeforeFirst(B):a.onAfterLast!==!1&&a.onAfterLast(B),void C();var n,O,y=0;if(B.is(":visible")){var I=B.find(".lightbox-main"),S=B.find(".lightbox-caption");if(O=c.index(u),y=O>o?-1:o>O?1:0,I.length){if(O===o)return;v||I.translateXAndFade(-100*y,0,a.speed,function(){t(this).remove()})}S.length&&(S.find(".buttons a").trigger("removeTooltip"),S.length&&S.opacity(0,a.speed,function(){t(this).remove()}))}else B.show();B.find(".lightbox-modal").fadeOut(function(){t(this).remove()}),u=c.eq(o),n=u.data(J.OBJ),Y.show(),z.find(".progress").hide(),m="video"===n[J.CATEGORY],b="audio"===n[J.CATEGORY],T="other"===n[J.CATEGORY],g=!m&&!b&&!T,a.onLoadStart!==!1&&a.onLoadStart(u),setTimeout(function(){var O,I;v=!1,m?(O=t.Deferred(),p=h=t("<video>",{"class":"lightbox-main video",preload:"auto",controls:"true",poster:Album.getImagePath(n)}).on("loadedmetadata",function(t){O.resolve(t)}).attr("src",Album.getSourcePath(n))):g?(I=t.Deferred(),p=h=t("<img>",{"class":"lightbox-main image"}).on("load",function(t){I.resolve(t)}).attr("src",Album.getImagePath(n))):(h=t("<div>",{"class":"lightbox-main "+n[J.CATEGORY]}),b?(O=t.Deferred(),I=t.Deferred(),t("<img>",{"class":"poster"}).on("load",function(t){I.resolve(t)}).attr("src",Album.getImagePath(n)).appendTo(h),p=t("<audio>",{preload:"auto",controls:"true"}).on("loadedmetadata",function(t){O.resolve(t)}).attr("src",Album.getSourcePath(n)).appendTo(h)):(I=t.Deferred(),t("<a>",{href:Album.getSourcePath(n),target:"_blank"}).append(t("<img>",{"class":"other"}).on("load",function(t){I.resolve(t)}).attr("src",Album.getImagePath(n))).appendTo(h),t("<p>",{"class":"click-hint",html:r.clickToOpen}).appendTo(h))),f=t("<div>",{"class":"lightbox-caption"+(l?" slideshow":"")}).hide().appendTo(B),n[J.IMAGECAPTION]&&f.append(t("<div>",{"class":"caption",html:n[J.IMAGECAPTION]}));var C=t("<div>",{"class":"buttons"});if(A&&"image"===n[J.CATEGORY]){i=t("<div>",{"class":"download icon-download"}).appendTo(C);for(var S=Album.getImagePath(n),P=0;P<A.length;P++)i.append(t("<a>",{text:A[P],href:S.replace("slides/","dl/"+A[P]+"/"),download:""}))}a.share&&C.renderShares({sites:a.share,title:n[J.TITLE]||n[J.NAME],description:n[J.COMMENT],image:Album.getAbsoluteImagePath(n),href:Album.getAbsolutePath(n)}),a.printImage&&"image"===n[J.CATEGORY]&&(i=t("<a>",{"class":"button small icon-printer",text:r.print}).appendTo(C),i.on(x,function(){printImage(n[J.ORIGINAL]&&!a.rightClickProtect?n[J.ORIGINAL][J.PATH]:n[J.IMAGE][J.PATH],n[J.TITLE]||"",n[J.THUMBCAPTION]||"")})),n[J.ORIGINAL]&&!a.rightClickProtect&&"image"===n[J.CATEGORY]&&C.append(t("<a>",{"class":"button small icon-download",text:r.download,download:"",href:n[J.ORIGINAL][J.PATH]})),a.shop&&(i=t("<a>",{"class":"button small icon-shopping-cart",text:r.addCart}).appendTo(C),i.on(x,function(e){var o=t(a.shop.hook),i=t(e.target);if(o.trigger("addItems",n),!t.cookie("shoppingCartInfo")){var s,d=t("<div>",{"class":"lightbox-modal"}).appendTo(B);d.hide().fadeIn(),d.append(t("<div>",{"class":"shoppingcart-info",html:r.shoppingcartInfo}).append(s=t("<button>",{type:"button","class":"lightbox-btn close",title:"Close"}))),d.add(s).on(x,function(e){return e.target==this?(d.fadeOut(function(){t(this).remove()}),!1):void 0}),t.cookie("shoppingCartInfo",!0,86400)}i.addClass("disabled").text(r.added),setTimeout(function(){i.removeClass("disabled").text(r.addCart)},1e3)})),n[J.PHOTODATA]&&(i=t("<a>",{"class":"button small icon-camera",text:r.photoData}).appendTo(C),i.on(x,function(){var e,o=t("<div>",{"class":"lightbox-modal"}).appendTo(B);return o.hide().fadeIn(),o.append(t("<div>",{"class":"photodata",html:n[J.PHOTODATA]}).append(e=t("<button>",{type:"button","class":"lightbox-btn close",title:"Close"}))),o.add(e).on(x,function(e){return e.target==this?(o.fadeOut(function(){t(this).remove()}),!1):void 0}),!1})),n[J.LOCATION]&&(i=t("<a>",{"class":"button small icon-location",text:r.map}).appendTo(C),i.on(x,function(){var o,i,s=t("<div>",{"class":"lightbox-modal"}).appendTo(B);return s.hide().fadeIn(),s.append(i=t("<div>",{"class":"map"}).append(o=t("<button>",{type:"button","class":"lightbox-btn close",title:"Close"}))),s.add(o).on(x,function(e){return e.target==this?(s.fadeOut(function(){t(this).remove()}),!1):void 0}),i=t("<div>",{"class":"map-cont"}).height(.6*t(e).height()).appendTo(i),i.data("location",n[J.LOCATION]),a.mapType&&i.data("map-type",a.mapType),a.mapZoom&&i.data("map-zoom",a.mapZoom),setTimeout(function(){loadMap(i)},100),!1})),n[J.MOSTPHOTOS]&&C.append(t("<a>",{"class":"button small icon-shopping-cart",text:r.buyImage,target:"_blank",href:"http://mostphotos.com/"+n[J.MOSTPHOTOS]})),C.is(":empty")||(f.addClass("hasbuttons"),f.append(C)),f.toggle(!l||f.children(".caption").length>0),t.when(I,O).done(function(){h.css({opacity:0}).appendTo(B),a.rightClickProtect&&p.on("contextmenu",function(t){return t.preventDefault(),!1});var e;if(g)e=[h[0].width,h[0].height];else if(m)e=[p.width(),p.height()];else{var n=h.find("img")[0];e=[n.width,n.height]}if(h.data("size",e),(m||b)&&a.videoAuto&&p.attr("autoplay",!0),g){var i=Math.min(s*a.fitRatio/e[0],d*a.fitRatio/e[1]);(1>i||a.fitImages)&&(e[0]*=i,e[1]*=i)}if(h.css({left:(s-e[0])/2,top:(d-e[1])/2,width:e[0],height:e[1]}),h.translateX(100*y),setTimeout(function(){Y.hide(),h.translateXAndFade(0,1,a.speed),setTimeout(function(){hasTouch?(setTimeout(function(){M(),R()},l?Math.min(a.slideshowDelay/2,2e3):2e3),h.on("touchend."+w+" touchcancel."+w+(pointerUpEvent?" "+pointerUpEvent+"."+w:""),function(){return setTimeout(function(){v||(m||b?f.is(":visible")?(M(),R(),p[0].controls=!0):this.controls?(M(),R(),p[0].controls=!1):(D(),L(),p[0].controls=!0):g&&(!f.is(":visible")||f.css("opacity")<1?(D(),L()):(M(),R())))},50),T})):h.on("click."+w,function(t){return v||(m||b?p[0].controls=!p[0].controls:g&&((t.pageX||t.originalEvent.pageX)-h.position().left>h.width()/2?N():G())),T}),h.swipe({onSwipedLeft:function(){v=!0,N()},onSwipedRight:function(){v=!0,G()},onSmallSwipe:function(){},onFinished:function(){t(this).trigger("removeSwipe"),t(this).remove()}}),a.onLoadEnd!==!1&&a.onLoadEnd(u)},a.speed)},50),a.preloadNext){var r;0>y&&o>0?r=c.eq(o-1).data(J.OBJ):o<c.length-2&&(r=c.eq(o+1).data(J.OBJ)),r&&"image"===r[J.CATEGORY]&&t("<img>",{src:Album.getImagePath(r)}).load()}l?(clearTimeout(l),z.find(".progress").show(),l=setTimeout(N,a.slideshowDelay)):k()}).fail(function(){a.onLoadEnd!==!1&&a.onLoadEnd(u)})},hasTouch?a.speed+50:a.speed/3)},C=function(){k(),h.length?B.fadeOut(a.speed,function(){P(),a.onEnd!==!1&&a.onEnd(u)}):a.onEnd!==!1&&a.onEnd(u)},S=function(){k(),c.off("."+w),t(o).add(t(e)).add(B).off("."+w),h.length?h.animate({opacity:0},a.speed,function(){B.remove()}):B.remove()},P=function(){h.length&&(h.remove(),h=t()),f.length&&(f.remove(),f=t())},E=function(){clearTimeout(l),H.hide(),z.show(),X.add(_).add(F).fadeOut(1e3),f.addClass("slideshow"),l=setTimeout(N,a.slideshowDelay/4),a.onSlideshowStart!==!1&&a.onSlideshowStart(u)},k=function(){a.onSlideshowPause!==!1&&a.onSlideshowPause(u),l=clearTimeout(l),H.show(),z.hide(),F.show(),X.add(_).show(),f.show().removeClass("slideshow")},L=function(){f.show()},R=function(){f.fadeOut(1e3)},D=function(){F.show()},M=function(){F.fadeOut(1e3)},G=function(){var t=c.index(u);t>0?I(t-1):(a.onBeforeFirst!==!1&&a.onBeforeFirst(),C())},N=function(){var t=c.index(u);t<c.length-1?I(t+1):(a.onAfterLast!==!1&&a.onAfterLast(),C())};w!==n&&O(w),t(this).data("llb_ns",w="llb_"+Math.floor(1e4*Math.random())),c=t(this).find(a.delegate);var B=t("<div>",{id:w,"class":"lightbox"}).hide().appendTo("body"),q=t("<div>",{"class":"lightbox-overlay"}).appendTo(B),Y=t("<div>",{"class":"lightbox-loading"}).append("<div>").appendTo(B),F=t("<button>",{type:"button","class":"lightbox-btn close",title:r.close}).on(x,function(){return C(),!1}).toggle(!hasTouch).appendTo(B),H=t("<button>",{type:"button","class":"lightbox-icon play icon-play",title:r.slideshow}).on(x,function(){return E(),!1}).appendTo(B),z=t("<button>",{type:"button","class":"lightbox-icon pause icon-pause",title:r.pause}).append(t("<span>",{"class":"progress"})).hide().on(x,function(){return k(),!1}).appendTo(B),X=!hasTouch&&c.length?t("<button>",{type:"button","class":"lightbox-btn arrow-left"}).on(x,function(){return G(),!1}).appendTo(B):t(),_=!hasTouch&&c.length?t("<button>",{type:"button","class":"lightbox-btn arrow-right"}).on(x,function(){return N(),!1}).appendTo(B):t(),U=null;return s=B.width(),d=B.height(),t(e).on("resize."+w,function(){clearTimeout(U),U=setTimeout(function(){s=B.width(),d=B.height(),y()},50)}),a.quitOnDocClick&&q.on(hasTouch?"touchend."+w:"click."+w,function(e){h.length&&!t(e.target).is(h)&&C()}),a.enableKeyboard&&t(o).on("keyup."+w,function(t){if(!h.length)return!0;switch(t.preventDefault(),t.keyCode){case 27:C();break;case 37:G();break;case 39:N();break;case 32:l?k():E();break;default:return!0}return!1}),t(this).on("lightboxLoad."+w,function(t,e){k(),a.onStart!==!1&&a.onStart("number"==typeof e?c.eq(e):th),I(e)}).on("lightboxQuit."+w,function(){return C(),!1}).on("lightboxRemove."+w,function(){return S(),!1}).on("lightboxContainer."+w,function(){return B}).on("lightboxNext."+w,function(){return k(),N(),!1}).on("lightboxPrevious."+w,function(){return k(),G(),!1}),a.auto!==n&&t.isNumeric(a.auto)&&(a.auto<0&&(a.auto=c.length+a.auto),a.onStart!==!1&&a.onStart(c.eq(a.auto)),I(a.auto)),a.onReady&&a.onReady(u),this},t.fn.lightbox.defaults={delegate:"li",auto:!1,slideshowDelay:4e3,fitImages:!1,fitRatio:.86,videoAuto:!1,rightClickProtect:!1,printImage:!1,speed:400,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!0,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1,onAfterLast:!1,onBeforeFirst:!1,onReady:!1,onSlideshowStart:!1,onSlideshowPause:!1},t.fn.lightbox.text={close:"Close",slideshow:"Slideshow",pause:"Pause",download:"Download",print:"Print",map:"Map",buyImage:"Buy image",photoData:"Photo data",addCart:"Add to cart",added:"Added...",shoppingcartInfo:'This item is placed into the "Shopping cart". You can buy it by clicking the "Buy now" button after you quit the lightbox.',clickToOpen:"Click to open this document with the associated viewer!"}}(jQuery,window,document);
!function(t){"use strict";var o=0,e=0,s=1,a=1,n=2,p=2,i=["left","center","right"],r=["top","middle","bottom"],l="align-left align-center align-right valign-top valign-middle valign-bottom";t.fn.alignTo=function(f,d){if(d=t.extend({},t.fn.alignTo.defaults,d),"string"==typeof f&&(f=t(f)),f instanceof t&&f.length){var g,h,c,u=t(window).width(),v=t(window).height(),m=function(o){var e={left:0,top:0};return o.parents().each(function(){return"fixed"===t(this).css("position")?(e.left=t(window).scrollLeft(),e.top=t(window).scrollTop(),!1):void 0}),e},w=m(f);if("AREA"===f[0].nodeName&&"RECT"===f[0].shape.toUpperCase()){var I=f[0].coords.split(",");h=parseInt(I[2],10)-parseInt(I[0],10),c=parseInt(I[3],10)-parseInt(I[1],10),g=f.parent().offset(),g.left+=parseInt(I[0],10),g.top+=parseInt(I[1],10)}else g=f.offset(),h=f.outerWidth(),c=f.outerHeight();return g.left-=w.left,g.top-=w.top,t(this).each(function(){var f=t(this),m=d.pos[2],I=d.pos[3];f.css("maxHeight","none");var x=f.outerWidth(),M=f.outerHeight(),T=Math.round(g.left+d.pos[2]*h/2+(d.pos[2]-1)*d.gap),C=Math.round(g.top+d.pos[3]*c/2+(d.pos[3]-1)*d.gap),H=Math.round(T-d.pos[0]*x/2),b=Math.round(C-d.pos[1]*M/2);(0>b||b+M>v)&&(d.pos[2]!==s?b=2*b+M>v?v-M:0:d.pos[3]===e?v>2*g.top+c&&(b=g.top+c+d.gap,I=p):d.pos[3]===p&&v<2*g.top+c&&(b=Math.max(0,g.top-M-d.gap),I=e),0>b&&(b=0),b+M>v&&f.css({overflow:"auto",maxHeight:v-b-(parseInt(f.css("paddingTop"),10)+parseInt(f.css("paddingBottom"),10))})),(0>H||H+x>u)&&(d.pos[3]!==a?H=2*H+x>u?u-x:0:d.pos[2]===o?u>2*g.left+h&&(H=g.left+h+d.gap,m=n):d.pos[2]===n&&u<2*g.left+h&&(H=Math.max(0,g.left-x-d.gap),m=o),0>H&&(H=0),H+x>u&&f.css({overflow:"auto",maxWidth:u-H-(parseInt(f.css("paddingLeft"),10)+parseInt(f.css("paddingRight"),10))})),f.css({position:"absolute",left:H+w.left,top:b+w.top}).removeClass(l).addClass("align-"+i[m]).addClass("valign-"+r[I])})}},t.fn.alignTo.defaults={gap:0,pos:[s,p,s,e]}}(jQuery);
!function(t){"use strict";t.fn.addTooltip=function(e,o){e&&"string"!=typeof e&&!e.jquery&&(o=e,e=null);var n={tooltip:"tooltip"},i=".tt";o=t.extend({},t.fn.addTooltip.defaults,o),t.fn.hideAllTooltips=function(){t("."+o.className).hide()};var u=function(e,i){var u;if(i)if("string"==typeof i)u=t("<div>",{html:i}).appendTo("body");else{if(!i.jquery)return null;u=t.contains(document.body,i[0])?i:i.appendTo("body")}else{if((i=e.data(n.tooltip))?("."===i.charAt(0)?i=e.find(i):"#"===i.charAt(0)&&(i=t(i)),i.jquery&&i.removeClass("hidden")):(i=e.attr("title"),e.removeAttr("title")),!i||!i.length)return null;u=t("<div>",{html:i}).appendTo("body")}return u.addClass(o.className).hide(),u.append(t("<span>",{"class":o.nub})),u};return this.each(function(){var n,a,r,l,c=t(this),s=!1,f=!1,d=function(){r=clearTimeout(r),s=!0,n.finish().show()},p=function(){f||(clearTimeout(r),s=!1,r=setTimeout(T,100))},h=function(){a=clearTimeout(a),clearTimeout(r),s=!1,r=setTimeout(T,100)},m=function(){return h(),!0},T=function(){!s&&n&&n.stop(!0,!1).fadeOut(200,function(){n.hide()})},v=function(){clearTimeout(r),r=setTimeout(T,o.stay)},y=function(){return(n=u(c,e))?(hasTouch||n.on("mouseover"+i,d).on("mouseout"+i,p),n.find("input, textarea").on("focus"+i,function(){f=!0,d()}).on("blur"+i,function(){f=!1}),!0):!1},b=function(){a=clearTimeout(a),clearTimeout(r),n&&n.length&&(n.off(i),n.remove())},g=function(){var t=c.offset();t.top===l.top&&t.left===l.left&&n.fadeIn(300).alignTo(c,{gap:10,pos:o.pos})},j=function(){if(n)n.stop(!0,!1),r=clearTimeout(r);else if(!y())return;l=c.offset(),clearTimeout(a),a=setTimeout(g,o.delay),hasTouch?v():s=!0},w=function(t){if(t.preventDefault(),!n||n.is(":hidden"))j();else if(s=!1,h(),"A"===c[0].nodeName){var e=c.attr("href");e&&!e.startsWith("javascript:")?window.location.href=e:c.trigger("click")}return!1},A=function(t){t.preventDefault(),t.stopPropagation()};c.on("removeTooltip",b),hasTouch?c.on("touchstart"+i+" pointerdown"+i+" MSPointerDown"+i,w).on("touchend"+i+" touchcancel"+i+" pointerup"+i+" MSPointerUp"+i,A).on("click"+i,A):c.on("focus"+i+" mouseenter"+i,j).on("blur"+i+" mouseleave"+i,h).on("click"+i,m)})},t.fn.addTooltip.defaults={delay:50,className:"hint",nub:"nub",stay:2e3,pos:[1,2,1,0]}}(jQuery);
!function(t){"use strict";t.fn.addModal=function(e,o,n){var a=t(this);if("string"==typeof e&&(e=t(e)),e instanceof t&&e.length){t.isArray(o)||(n=o,o=null),n=t.extend({},t.fn.addModal.defaults,n),n.savePosition=n.savePosition&&"uid"in n;var i=getTranslations(t.fn.addModal.text);n.defaultButton&&(n.defaultButton=translate(n.defaultButton,"OK"));var d,s,r,c,u,p,l,h,f,v={w:"modal",p:"window",h:"head",c:"cont",ci:"cont_i",x:"close",r:"resize"},m=0;n.uid&&t("#"+n.uid).parents("."+v.w).remove(),d=t("<div>",{"class":v.w,role:"dialog","aria-hidden":!0,"aria-labelledby":v.h}).css({opacity:0}).appendTo(a),a.css({position:"relative"});var g=function(){l=a.width(),h=a.height()};g(),t(window).on("resize",g),n.darkenBackground&&d.addClass("darken"),s=t("<div>",{id:n.uid||"_mod_"+Math.floor(1e4*Math.random()),"class":v.p+" "+n.type}).css({width:n.width}).appendTo(d),r=t("<header>",{"class":v.h}).appendTo(s),r.append(t("<h5>",{id:v.h,text:n.title||("error"===n.type||"warning"===n.type?i[n.type]:"")})),("error"===n.type||"warning"===n.type)&&r.append(t("<div>",{"class":n.type+" icon-warning"}));var w=function(){return c.trigger("removeTooltip"),f=clearTimeout(f),d.animate({opacity:0},n.speed,function(){d.remove()}),!1};d.on("destroy",w),n.blocking&&n.closeOnClickOut&&d.on("click",function(e){return t(e.target).hasClass(v.w)?w(e):void 0}),c=t("<a>",{"class":v.x+" icon-close-light"}).appendTo(r),document.touchMode?c[0].addEventListener(TOUCH_END,w):(c.on("click",w),c.addTooltip(i.closeWindow));var M=function(e){e.preventDefault();var o=s.position().left,a=s.position().top,i=getCoords(e),d=l-s.width()-n.pad,c=h-s.height()-n.pad,u=r.css("cursor");r.css({cursor:"move"});var p=function(t){t.preventDefault();var e=getCoords(t);return s.css({left:Math.minMax(n.pad,o+e.x-i.x,d),top:Math.minMax(n.pad,a+e.y-i.y,c)}),!1},f=function(e){return e.preventDefault(),t(document).off({mousemove:p,mouseup:f}),r.css("cursor",u),n.savePosition&&B(),!1};return document.touchMode?(this.addEventListener(TOUCH_END,f),this.addEventListener(TOUCH_MOVE,p)):t(document).on({mousemove:p,mouseup:f}),!1};if(n.movable&&(document.touchMode?r[0].addEventListener(TOUCH_START,M):r.on("mousedown",M)),u=t("<div>",{"class":v.c}).appendTo(s),p=t("<div>",{"class":v.ci}).append(e).appendTo(u),!o&&n.defaultButton&&(o=[{t:n.defaultButton,h:w}]),o){var b,y,T,k=t("<div>",{"class":"buttons"}).appendTo(p),x=function(e){T.each(function(o){t(this).toggleClass("active",o===e)})},C=function(){t(document).off("keydown",E),w()},E=function(e){if(document.activeElement&&"input"===document.activeElement.nodeName||t.isFunction(n.enableKeyboard)&&!n.enableKeyboard())return!0;var o=e?e.keyCode:window.event.keyCode;if(27===o)return C(),!1;if(k){var a=k.find("a.active"),i=T.index(a);switch(o){case 13:case 10:t.isFunction(a[0].handler)&&a[0].handler.call(d)!==!1&&C();break;case 39:x((i+1)%T.length);break;case 37:x(i?i-1:T.length-1);break;default:return!0}return!1}return!0},O=function(e){e.preventDefault();var o=e.target;return t.isFunction(o.handler)&&o.handler.call(d,s)!==!1&&C(),!1};for(b=0;b<o.length;b++)b&&k.append(" "),y=t("<button>",{html:o[b].t}).on("click",O).appendTo(k),t.isFunction(o[b].h)&&(y[0].handler=o[b].h);T=k.children("button"),T.last().addClass("active"),(t.isFunction(n.enableKeyboard)||n.enableKeyboard)&&t(document).on("keydown",E)}if(n.resizable){var D=function(t){t.preventDefault();var e=[s.position().left,s.position().top,s.width(),s.height()],o=[n.pad,n.pad,l-2*n.pad,h-2*n.pad],a=function(t){s.css({left:Math.minMax(n.gap,t[0],l-t[2]-n.gap),top:Math.minMax(n.gap,t[1],h-t[3]-n.gap),width:t[2],height:t[3]}),p.css({height:t[3]-m})};return e[0]===o[0]&&e[1]===o[1]&&e[2]===o[2]&&e[3]===o[3]?a(s.data("wpos")):(a(o),s.data("wpos",e)),n.savePosition&&B(),!1};r.on(document.touchMode?"dbltap":"dblclick",D);var I=t("<a>",{"class":v.r}).appendTo(s),N=function(e){e.preventDefault();var o=s.width(),a=s.height(),i=getCoords(e),r=d.width(),c=h-n.pad-s.position().top-m,r=l-n.pad-s.position().left,u=function(t){t.preventDefault();var e=getCoords(t),n=Math.min(Math.max(a+e.y-i.y-m,20),c);return s.css({width:Math.min(Math.max(o+e.x-i.x,60),r),height:n+m}),p.css({height:n}),!1},f=function(e){return e.preventDefault(),t(document).off({mousemove:u,mouseup:f}),n.savePosition&&B(),!1};return document.touchMode?(this.addEventListener(TOUCH_MOVE,u),this.addEventListener(TOUCH_END,f)):t(document).on({mousemove:u,mouseup:f}),!1};document.touchMode?I[0].addEventListener(TOUCH_START,N):I.on("mousedown",N)}var P=function(){var t=s.width(),e=s.height();m=e-p.height(),t&&e&&l&&h&&(t+2*n.pad>l&&s.css({width:t=l-2*n.pad}),e+2*n.pad>h&&(s.css({height:e=h-2*n.pad}),p.css({height:h-2*n.pad-m})),s.css({left:Math.max(Math.round((l-t)*n.pos[0]/2),n.pad),top:Math.max(Math.round((h-e)*n.pos[1]/2),n.pad)}))},_=function(t){var e,o=Math.minMax(n.pad,parseInt(t[0],10),l-n.pad-60),a=Math.minMax(n.pad,parseInt(t[1],10),h-n.pad-60),i=Math.minMax(120,parseInt(t[2],10),l-o-n.pad);(isNaN(o)||isNaN(a)||isNaN(i))&&P(),m=r.outerHeight()+parseInt(u.css("padding-top"),10)+parseInt(u.css("padding-bottom"),10)+parseInt(p.css("padding-top"),10)+parseInt(p.css("padding-bottom"),10)+parseInt(u.css("border-top-width"),10),s.css({position:"absolute",left:o,top:a,width:i}),s.height()>(e=h-a-n.pad)&&(s.css({height:e}),p.css({height:e-m}))},B=function(){t.cookie("modalPosition"+n.uid,s.position().left+","+s.position().top+","+s.width()+","+s.height())},F=function(e){d.css({opacity:0}).show(),setTimeout(function(){e&&(e=e.split(","))&&t.isArray(e)&&e.length>3?_(e):P(),n.blocking||d.css({width:0,height:0,right:"auto",bottom:"auto",overflow:"visible"}),d.animate({opacity:1},n.speed),n.savePosition&&B(),n.autoFade&&(f=setTimeout(w,n.autoFade)),n.scrollIntoView&&setTimeout(function(){var t=p.children(":not(.buttons)").find(".active:first");t&&t.length&&p.scrollTop(Math.max(Math.floor(t.position().top)-50,0))},200),d.attr({tabindex:0,"aria-hidden":!1}),d.focus()},40)};return F(n.savePosition?t.cookie("modalPosition"+n.uid):null),this}},t.fn.addModal.defaults={speed:300,autoFade:0,width:400,resizable:!1,movable:!0,blocking:!0,enableKeyboard:!0,closeOnClickOut:!0,darkenBackground:!0,savePosition:!1,scrollIntoView:!1,defaultButton:"okButton",pad:6,pos:[1,1],type:"normal"},t.fn.addModal.text={closeWindow:"Close window",error:"error",warning:"warning"}}(jQuery);
!function(e){"use strict";e.fn.addShop=function(t,n){if(e.isArray(t)||(n=t,t=[]),n=e.extend({},e.fn.addShop.defaults,n),!n.id)return this;var o,a,i,r,d,p,s,c=e.fn.addShop.id,l=e.fn.addShop.text,u=n.id.replace("|","@"),h=DEBUG?e.fn.addShop.st.sandboxurl:e.fn.addShop.st.url,m=e.fn.addShop.st.curr_symbol[n.currency]||n.currency,f=e(this).eq(0),g=e.fn.addShop.st.targetCart,y=e(),b=function(t){t&&e(window).add(f.find("form")).add(f.find("a")).add(f.find("button")).off("."+t)},v=function(e){var t,n,o,a,i=e.split("::"),r=[];for(t=0;t<i.length;t++)if(n=i[t].split("="),n.length>1){if(a={},a.label=n[0],o=n[1].split("+"),null==(a.price=parseFloat(o[0])))continue;a.shipping=o.length>1?parseFloat(o[1]):0,a.shipping2=o.length>2?parseFloat(o[2]):a.shipping,a.text=n[0]+" = "+m+" "+a.price.toFixed(2)+(o.length>1?"+"+a.shipping.toFixed(2):""),r.push(a)}return r},C=function(t,n){var o,a=e("<select>").appendTo(t);for(o=0;o<n.length;o++)a.append(e("<option>",{val:n[o].price,html:n[o].text}));return a},_=function(t,n,o,a,i){if(!t||!n)return{};var r=e("<input>",{type:a||"text"}).appendTo(t);return r.prop("name",n),o&&r.val("string"==typeof o?o.stripQuote():o),i&&r.prop(i,!0),r},w=function(e){return typeof e===UNDEF?F(c.discountRateCart):void F(c.discountRateCart,e)},x=function(e){return typeof e===UNDEF?F(c.discountAmountCart):void F(c.discountAmountCart,e)},S=function(e,t){var n=i.children("[name="+c.option+"]");if(n&&n.length){var o=n.val().replace(/(\s\(CC\:.+\))$/,"");n.val(o+" (CC:"+e+(typeof t!==UNDEF?"="+t:"")+")")}},F=function(e,t){var n=i.children("[name="+e+"]");return typeof t===UNDEF?n&&n.length?parseFloat(n.val()):null:void(null==t?n.remove():n&&n.length?n.val(t):_(i,e,t,"hidden"))},T=function(){var e=a.children("select").eq(0);return e&&e.length?e.prop("selectedIndex"):0},U=function(){var t=T(),n=a.children(".discount").eq(0),o=a.children(".total").eq(0),i=a.children("[name=copies]").val()||1,r=s[t].price,d=s[t].shipping+(i-1)*s[t].shipping2,p=y.length,c=x(),l=w();n.length||(n=e("<span>",{"class":"discount"}).insertAfter(a.children("select"))),c&&c>0?(n.show().html("- "+m+" "+c.toFixed(2)),o.html(m+" <b>"+(p*(i*r+d)-c).toFixed(2)+"</b>")):l&&l>0?(n.show().text("-"+l+"%"),o.html(m+" <b>"+(p*(i*r*(100-l)/100+d)).toFixed(2)+"</b>")):(n.hide(),o.html(m+" <b>"+(p*(i*r+d)).toFixed(2)+"</b>"))},A=function(){var t=T(),o=a.children("[name=copies]").val()||1,i=s[t].price,r=s[t].shipping,d=s[t].shipping2;n.quantityCap&&o>n.quantityCap&&a.children("[name=copies]").val(o=n.quantityCap),F(c.name,y.length+" "+l.items),e("[name^="+c.name+"_]").each(function(e){var t=e+1;F(c.price+"_"+t,i),F(c.copies+"_"+t,o),F(c.shipping+"_"+t,r?r:null),F(c.shipping2+"_"+t,d?d:null)}),F(c.option,s[t].text),U()},k=function(t){var o,i,d=new Date,p=t===!0;if(n.coupons&&(o=a.children("[name=coupon]"))&&(i=o.val().trim()).length){var c,u,h,f=xDecrypt(n.coupons).split("::");for(c=0;c<f.length;c++)if(u=f[c].split(/=|\s*<\s*/),u[0]===i&&u.length>1){if(h=parseFloat(u[1]),.01>h)continue;if(u.length>2){var g,b=u[2].split(/-|:|\//);if(b.length<2&&(b[1]=1),b.length<3&&(b[2]=1),g=new Date(parseInt(b[0]),parseInt(b[1]),parseInt(b[2])),d>g)return e("body").addModal(e("<div>",{html:l.expired.replace("{0}",i)}),{type:"error"}),!1}if("%"===u[1].charAt(u[1].length-1)){if(h>99||1>h)continue;var v=w();v>h?p&&e("body").addModal(e("<div>",{html:l.lowerThanCurrent.replace("{0}",v+"%")}),{type:"warning"}):(p&&e("body").addModal(e("<div>",{html:l.accepted.replace("{0}",h+"%")}),{title:l.success}),w(h),S(i,h+"%"),e.cookie("discountRate",i,86400))}else if(e.cookie("discount_"+i))p&&e("body").addModal(e("<div>",{html:l.reclaimed}),{type:"warning"}),x(null),r&&(w(r),S(i,r+"%"));else{var v=w(),C=s[T()].price,_=y.length,F=x()||(v>0?_*C*v/100:0);h>C*_?p&&e("body").addModal(e("<div>",{html:l.higherThanPrice.replace("{0}",m+"&nbsp;"+h)}),{type:"warning"}):F>h?p&&e("body").addModal(e("<div>",{html:l.lowerThanCurrent.replace("{0}",m+"&nbsp;"+F.toFixed(2))}),{type:"warning"}):(p?e("body").addModal(e("<div>",{html:l.accepted.replace("{0}",m+"&nbsp;"+h)}),{title:l.success}):(e.cookie("discount_"+i,h,86400),r=w(),w(null)),x(h),S(i,n.currency+" "+h))}return U(),!0}return e("body").addModal(e("<div>",{html:l.noSuch}),{type:"error"}),!1}return!0},M=function(t){if(t&&t.length){for(var o,i=y.length,r=0,d=t.length;d>r;r++)o=Album.getThumbPath(t[r]),p.append(e("<a>").append(e("<img>",{src:o}))),F(c.name+"_"+(i+r+1),Album.getItemPath(t[r]));y=p.children(),i=y.length,f.toggle(i>0),e(n.buttons.emptyCart).toggleClass("disabled",!i),a.find(".count b").text(i),A()}},N=function(){p.empty(),y=e(),i.children('[name^="'+c.name+'_"],[name^="'+c.price+'_"],[name^="'+c.copies+'_"]').remove(),f.hide(),e(n.buttons.emptyCart).addClass("disabled"),a.find(".count b").text("0"),A()},D=function(t){var o=y.length,r=y.index(t)+1,d=i.children('[name^="'+c.name+'_"],[name^="'+c.price+'_"],[name^="'+c.copies+'_"]');if(t.remove(),d.filter('[name$="_'+r+'"]').remove(),o>r)for(var s=r+1;o>=s;s++)d.filter('[name="'+c.name+"_"+s+'"]').attr("name",c.name+"_"+(s-1)),d.filter('[name="'+c.price+"_"+s+'"]').attr("name",c.price+"_"+(s-1)),d.filter('[name="'+c.copies+"_"+s+'"]').attr("name",c.copies+"_"+(s-1));y=p.children(),o=y.length,f.toggle(o>0),e(n.buttons.emptyCart).toggleClass("disabled",!o),a.find(".count b").text(o),A()};if(s=v(n.options),s.length){if(f.hide(),b(f.data("las_ns")),e(this).data("las_ns",o="las_"+Math.floor(1e4*Math.random())),p=e("<div>",{"class":n.shopItemsHook||e.fn.addShop.st.shopItemsHook}).appendTo(f),M(t),p.on("click","> a",function(){return D(e(this)),!1}),e(n.buttons.emptyCart).on("click."+o,N),a=e("<form>",{name:"shopping",method:"post"}).appendTo(f),a.append(e("<span>",{"class":"count",html:"<b>"+y.length+"</b> &times;"})),d=C(a,s),d.on("change",A),n.hasOwnProperty("discount")||(n.discount=e.fn.addShop.defaults.discount||0),"-"===n.discount&&(n.discount=0),1!==n.quantityCap&&(a.append("&times;"),d=_(a,"copies",1),d.addClass("copies").on("change",A)),a.append("="),a.append(e("<span>",{"class":"total"})),n.coupons){a.append(e("<input>",{type:"text",name:"coupon","class":"coupon",placeholder:l.couponCode}));var I=e("<a>",{href:NOLINK,html:"&nbsp;","class":"redeem icon-refresh"}).on("click."+o,function(e){return e.preventDefault(),k(!0),!1});a.append(I)}if(i=e("<form>",{name:c.form,action:h+"cgi-bin/webscr/",method:"post"}).appendTo(f),n.sameWindowCheckout||i.attr("target",g),F("cmd","_cart"),F("charset","utf-8"),F("lc",n.locale),F(c.seller,u),F(c.currency,n.currency),F(c.shopUrl,n.continueUrl||decodeURIComponent(window.location.href)),null!=n.handling&&e.isNumeric(n.handling)&&F(c.handlingCart,n.handling),F(c.option,s[0].label),n.discount&&n.discount<100&&w(n.discount),F("upload",1),A(),i.append(e("<button>",{id:"shopAdd",name:"submit","class":"paypalbtn button icon-paypal",html:l.buyNow})),i.on("submit."+o,function(t){var a=!0,r=e(t.target);if(n.coupons&&(a=k()),a){if(r.parents("[role=modal]").trigger("destroy"),!n.sameWindowCheckout)return window.open("",g,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no"),!0;i.off("submit."+o),i.trigger("submit")}return a}),n.coupons){var q=e.cookie("discountRate");q&&(e("input[name=coupon]").val(q),k(!1))}return U(),f.on("addItems."+o,function(){return M(Array.prototype.slice.call(arguments,1)),!1}),this}},e.fn.addShop.defaults={currency:"EUR",locale:"US",quantityCap:0,shippingFlat:!1,sameWindowChekout:!1,shopItemsHook:"cart-items"},e.fn.addShop.text=getTranslations({addCart:"Add to Cart",viewCart:"View Cart",emptyCart:"Empty Cart",buyNow:"Buy Now",items:"items",success:"Success",couponCode:"Coupon code",redeem:"Redeem",noSuch:"No such coupon exists!",expired:"The coupon code <b>{0}</b> has expired!",accepted:"The coupon code is accepted. You will get <b>{0}</b> discount the next time you add this item to the cart.",lowerThanCurrent:"This coupon offers lower discount than the current <b>{0}</b>.",higherThanPrice:"You can use this coupon only for items priced higher than <b>{0}</b>.",reclaimed:"This coupon has already been used!"}),e.fn.addShop.st={target:"ShoppingCart",targetCart:"BuyNow",url:"https://www.paypal.com/",sandboxurl:"https://www.sandbox.paypal.com/",curr_symbol:{USD:"US$",EUR:"&euro;",GBP:"GB&pound;",JPY:"&yen;",HUF:"Ft"}},e.fn.addShop.id={form:"paypal",seller:"business",currency:"currency_code",name:"item_name",option:"item_number",custom:"custom",price:"amount",priceCart:"amount_1",copies:"quantity",discountRate:"discount_rate",discountRateCart:"discount_rate_cart",discountAmount:"discount_amount",discountAmountCart:"discount_amount_cart",shipping:"shipping",shipping2:"shipping2",handlingCart:"handling_cart",shopUrl:"shopping_url"}}(jQuery);var xDecrypt=function(e){var t,n,o,a=[147,163,87,254,153,4,198,23],i=e.length,r=5*Math.ceil(i/8),d=new Array(r),p="",s=0;for(t=0;r>t;t++)d[t]=0;for(t=0;i>t;t++)(o=e.charCodeAt(t)-48)>9&&(o-=7),o<<=11-s%8,n=Math.floor(s/8),r>n&&(d[n]|=o>>8,++n<r&&(d[n]|=255&o)),s+=5;for(t=0;r>t;t++)d[t]^=a[t%8];for(r=d[0]|d[1]<<8,o=0,t=4;r>t;t++)p+=String.fromCharCode(d[t]),o+=d[t];return o!=(255&d[2]|d[3]<<8)&&(p=""),p};
var Newsfeed=function(e){"use strict";var t,n,o,a=[],r={count:3,description:!0},s=function(){for(var e=0,t=a.length;t>e;e++)a[e].date=new Date(a[e].publishedDate);a.sort(function(e,t){return t.date-e.date})},d=function(){for(var n,o,s=e("<ul>",{"class":"newsfeed"}),d=0,i=a.length;i>d;d++)n=a[d],o=e("<li>").appendTo(s),o.append(e("<a>",{href:n.link,target:"_blank",html:n.title})),r.description&&(n.hasOwnProperty("contentSnippet")?o.append(e("<span>",{html:n.contentSnippet})):n.hasOwnProperty("content")&&o.append(n.content)),o.append(e("<span>",{"class":"pdate",text:n.date.toLocaleString()}));t.append(s)},i=function(e){e.error||(a=a.concat(e.feed.entries)),n++,p()},p=function(){if(o>n){var e=new google.feeds.Feed(r.feeds[n]);e.setNumEntries(r.count),e.load(i)}else t.is(":empty")&&(s(),d())},f=function(a){var s=20;if(e.extend(r,a),t=e(r.hook),n=0,o=r.hasOwnProperty("feeds")&&e.isArray(r.feeds)?r.feeds.length:1,t.length&&r.hasOwnProperty("feeds")){var d=function(){"undefined"==typeof google?--s&&setTimeout(d,100):google.load("feeds","1",{callback:p})};d()}};return{init:f}}(jQuery);
!function(){var e,t;e=function(){function e(e,t){var n,o;if(this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1},"object"==typeof e)for(n in e)o=e[n],this.options[n]=o;this.context=null!=t?t:this,this.unique=this._genKey()}return e.prototype.hasNext=function(){return"string"==typeof this.context.nextUrl&&this.context.nextUrl.length>0},e.prototype.next=function(){return this.hasNext()?this.run(this.context.nextUrl):!1},e.prototype.run=function(t){var n,o,a;if("string"!=typeof this.options.clientId&&"string"!=typeof this.options.accessToken)throw new Error("Missing clientId or accessToken.");if("string"!=typeof this.options.accessToken&&"string"!=typeof this.options.clientId)throw new Error("Missing clientId or accessToken.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&(a=document.createElement("script"),a.id="instafeed-fetcher",a.src=t||this._buildUrl(),n=document.getElementsByTagName("head"),n[0].appendChild(a),o="instafeedCache"+this.unique,window[o]=new e(this.options,this),window[o].unique=this.unique),!0},e.prototype.parse=function(e){var t,n,o,a,i,s,r,l,d,c,u,p,h,f,m,g,v,w,b,y,T,k;if("object"!=typeof e){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(200!==e.meta.code){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,e.meta.error_message),!1;throw new Error("Error from Instagram: "+e.meta.error_message)}if(0===e.data.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,e),this.context.nextUrl="",null!=e.pagination&&(this.context.nextUrl=e.pagination.next_url),"none"!==this.options.sortBy)switch(f="random"===this.options.sortBy?["","random"]:this.options.sortBy.split("-"),h="least"===f[0]?!0:!1,f[1]){case"random":e.data.sort(function(){return.5-Math.random()});break;case"recent":e.data=this._sortBy(e.data,"created_time",h);break;case"liked":e.data=this._sortBy(e.data,"likes.count",h);break;case"commented":e.data=this._sortBy(e.data,"comments.count",h);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}if("undefined"!=typeof document&&null!==document&&this.options.mock===!1){if(l=e.data,null!=this.options.limit&&l.length>this.options.limit&&(l=l.slice(0,this.options.limit+1||9e9)),n=document.createDocumentFragment(),null!=this.options.filter&&"function"==typeof this.options.filter&&(l=this._filter(l,this.options.filter)),null!=this.options.template&&"string"==typeof this.options.template){for(a="",s="",c="",m=document.createElement("div"),g=0,b=l.length;b>g;g++)i=l[g],r=i.images[this.options.resolution].url,this.options.useHttp||(r=r.replace("http://","//")),s=this._makeTemplate(this.options.template,{model:i,id:i.id,link:i.link,image:r,caption:this._getObjectProperty(i,"caption.text"),likes:i.likes.count,comments:i.comments.count,location:this._getObjectProperty(i,"location.name")}),a+=s;for(m.innerHTML=a,k=[].slice.call(m.childNodes),v=0,y=k.length;y>v;v++)p=k[v],n.appendChild(p)}else for(w=0,T=l.length;T>w;w++)i=l[w],d=document.createElement("img"),r=i.images[this.options.resolution].url,this.options.useHttp||(r=r.replace("http://","//")),d.src=r,this.options.links===!0?(t=document.createElement("a"),t.href=i.link,t.appendChild(d),n.appendChild(t)):n.appendChild(d);document.getElementById(this.options.target).appendChild(n),o=document.getElementsByTagName("head")[0],o.removeChild(document.getElementById("instafeed-fetcher")),u="instafeedCache"+this.unique,window[u]=void 0;try{delete window[u]}catch(x){}}return null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),!0},e.prototype._buildUrl=function(){var e,t,n;switch(e="https://api.instagram.com/v1",this.options.get){case"popular":t="media/popular";break;case"tagged":if("string"!=typeof this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");t="tags/"+this.options.tagName+"/media/recent";break;case"location":if("number"!=typeof this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");t="locations/"+this.options.locationId+"/media/recent";break;case"user":if("number"!=typeof this.options.userId)throw new Error("No user specified. Use the 'userId' option.");if("string"!=typeof this.options.accessToken)throw new Error("No access token. Use the 'accessToken' option.");t="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return n=""+e+"/"+t,n+=null!=this.options.accessToken?"?access_token="+this.options.accessToken:"?client_id="+this.options.clientId,null!=this.options.limit&&(n+="&count="+this.options.limit),n+="&callback=instafeedCache"+this.unique+".parse"},e.prototype._genKey=function(){var e;return e=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)},""+e()+e()+e()+e()},e.prototype._makeTemplate=function(e,t){var n,o,a,i,s;for(o=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,n=e;o.test(n);)a=n.match(o)[1],i=null!=(s=this._getObjectProperty(t,a))?s:"",n=n.replace(o,""+i);return n},e.prototype._getObjectProperty=function(e,t){var n,o;for(t=t.replace(/\[(\w+)\]/g,".$1"),o=t.split(".");o.length;){if(n=o.shift(),!(null!=e&&n in e))return null;e=e[n]}return e},e.prototype._sortBy=function(e,t,n){var o;return o=function(e,o){var a,i;return a=this._getObjectProperty(e,t),i=this._getObjectProperty(o,t),n?a>i?1:-1:i>a?1:-1},e.sort(o.bind(this)),e},e.prototype._filter=function(e,t){var n,o,a,i,s;for(n=[],a=function(e){return t(e)?n.push(e):void 0},i=0,s=e.length;s>i;i++)o=e[i],a(o);return n},e}(),t="undefined"!=typeof exports&&null!==exports?exports:window,t.Instafeed=e}.call(this);
!function(e,t,a,n){"use strict";e.fn.selectable=function(t){t=e.extend({check:"checkbox"},t);var a,n=e(this).eq(0),o=function(){return t.selector?n.find(t.selector):n.children()},i=function(){var t=e(this).closest("li");return t.length&&t.toggleClass(J.ACTIVE),!1},s=function(){if(n.is(":visible")){return a.not("."+J.ACTIVE).each(function(){e(this).addClass(J.ACTIVE)}),!1}},r=function(){if(n.is(":visible")){return a.filter("."+J.ACTIVE).each(function(){e(this).removeClass(J.ACTIVE)}),!1}},l=function(){if(n.is(":visible")){return a.each(function(){e(this).toggleClass(J.ACTIVE)}),!1}},h=function(){a=o(),a.each(function(){e(this).children("span."+t.check).length||e(this).append(e("<span>",{"class":t.check}).on({click:i}))})};return h(),n.on({selectAll:s,selectNone:r,selectInverse:l,refresh:h}),this},e.fn.skin=function(a){a=e.extend({},e.fn.skin.defaults,a);var o=e(a.contentHook),i=getTranslations({foundNTimes:"found {0} time(s)",notFound:"not found",search:"Search",newImages:"New images",label:"Label",addCart:"Add to cart","return":"return",inTheLastDay:"in the last day",inThePastNDays:"in the past {0} days",sinceMyLastVisit:"since my last visit",imagesAdded:"Images added",imagesModified:"Images modified",imagesTaken:"Images taken",cookiePolicyText:"This album uses cookies to remember user preferences. By using it, you agree to our use of cookies.",cookiePolicyAgree:"Got it",cookiePolicyLearnMore:"Learn more",itemsInShoppingCart:"There are still unpaid items in the shopping cart!",stay:"Stay",leave:"Leave"}),s="",r=!0,l=function(n){o.children("article").each(function(){if(this.hasOwnProperty("overlay")){var n=e(this).data("oly_ns");n&&e(t).off("."+n),e(this).find("."+a.thumbsClass).trigger("lightboxRemove"),e(this).remove()}else e(this).hide()});var s="ths_"+Math.floor(1e4*Math.random()),r=e("<article>",{"class":(n.hasOwnProperty("articleClass")?n.articleClass+" ":"")+"cont overlay",id:s}).data("oly_ns",s).appendTo(o);r[0].overlay=!0,r=e("<section>",{"class":a.thumbContClass}).appendTo(r);var l=e("<header>",{"class":n.hasOwnProperty("icon")?n.icon:""}).appendTo(r);return n.hasOwnProperty("title")&&l.append(e("<h4>",{html:n.title})),l.append(e("<a>",{"class":"close",href:"",text:i.return}).on("click",function(){return h(),!1})),r},h=function(){return o.children("article").each(function(){if(this.hasOwnProperty("overlay")){var n=e(this).data("oly_ns");n&&e(t).off("."+n),e(this).find("."+a.thumbsClass).trigger("lightboxRemove"),e(this).remove()}else e(this).show(),e("."+a.foldersClass).trigger("refresh")}),removeParam(),z(),null},c=function(){var t=o.children("article:visible").eq(0),n=t.children("section."+a.thumbContClass);if(n.length||(n=e("<section>",{"class":a.thumbContClass}).appendTo(t)),!t.data("oly_ns")){var i="oly_"+ +Math.floor(1e4*Math.random());t.data("oly_ns",i).attr("id",i)}return n},d=function(){return o.find("article:visible section."+a.thumbContClass+" ."+a.thumbsClass)},u=function(t){var n;return o.find("article:visible section."+a.thumbContClass+" ."+a.thumbsClass+">li>a:first-child").each(function(){return(e(this).attr("href")||"").replace("slides/","")===t?(n=e(this),!1):void 0}),n?n.parent():e()},f=function(t){var n=o.find("article:visible section."+a.thumbContClass),i=[];return n&&(n=n.find("."+a.thumbsClass))?(n.children("."+J.ACTIVE).each(function(){t&&e(this).removeClass(J.ACTIVE),i.push(e(this).data(J.OBJ))}),i):i},p=function(){var t=o.find("article:visible section."+a.thumbContClass),n=[];return t&&(t=t.find("."+a.thumbsClass))?(t.children().each(function(){n.push(e(this).data(J.OBJ))}),n):n},g=function(t){for(var a=0,n=t,o=Math.floor(t.offset().top),i=t;(i=i.prev()).length&&!i.hasClass("lazyload")&&Math.floor(i.offset().top)===o;)n=n.add(i);for(i=t;(i=i.next()).length&&!i.hasClass("lazyload")&&Math.floor(i.offset().top)===o;)n=n.add(i);n.length>1&&(n.each(function(){e(this).height()>a&&(a=e(this).height())}),n.height(a))},m=function(t){t.append(e("<img>",{alt:t.data("alt"),"class":"hide-image"}).on("load",function(){e(this).addClass("show-image").removeClass("hide-image"),g(t.closest("li").height("auto"))}).attr("src",t.data("thumb")))},b=function(){var n=e("."+a.foldersClass).children("li.lazyload");if(n){var o=e(t).height(),i=e(t).scrollTop();n.each(function(){var t=e(this).offset().top,a=e(this).height();i+o>t&&t+a>i&&(e(this).removeClass("lazyload"),m(e(this).children("a[data-thumb]").eq(0)))})}};e.fn.renderThumbs=function(o,s){if(typeof o===n||!o.length||!e.isArray(o))return this;var r=e(this).eq(0),l=e(this).closest("article").data("oly_ns"),h=null,c=null,d=function(){var t=r.find("."+a.thumbsClass);return t.length||(t=e("<ul>",{"class":a.thumbsClass+" clearfix"}).appendTo(r)),t}(),u=function(){for(var t,n,s,r,h,c,u,f=d.children("li"),p=0;p<o.length;p++)u=o[p],p<f.length?(t=f.eq(p),s=t.find("a.thumb")):(t=e("<li>").appendTo(d),n=Album.getThumbPath(u),h=u[J.THUMBCAPTION],s=e("<a>",{"class":"thumb lazyload",href:Album.getImagePath(u)}).appendTo(t),h&&(t.addClass("hascaption"),r=e("<div>",{"class":"caption",html:h}),a.captionAbove?t.prepend(r):t.append(r))),t.data(J.OBJ,u),a.fixGrid&&s.height((c||(c=t.width()))*u[J.THUMB][J.HEIGHT]/u[J.THUMB][J.WIDTH]),t.on("click."+l,y),a.hasOwnProperty("shop")&&(s=e("<a>",{"class":"icon-shopping-cart add-cart",text:i.addCart}).appendTo(t),s.on("click",function(t){var n=e(t.target).closest("li");if(n.length){var o=e(a.shop.hook);o.trigger("addItems",n.data(J.OBJ)),n=n.find("img").eq(0);var i=n.width(),s=n.height(),r=n.offset().left,l=n.offset().top;n=n.clone().appendTo("body"),n.css({position:"absolute",left:r,top:l,width:i,height:s}),n.animate({left:o.offset().left+o.width()/2-i/4,top:o.offset().top+o.height()-s/2,width:i/2,height:s/2,opacity:0},function(){e(this).remove()})}return!1})),a.rightClickProtect&&t.on("contextmenu",function(e){return e.preventDefault(),!1})},f=0,p=function(){var t=e("<li>",{visibility:"hidden",height:0}).appendTo(d),a=Math.floor(.05+d.width()/t.outerWidth(!0));return t.remove(),a},g=function(){var e,t=d.children("li");if("absolute"!==t.eq(0).css("position")){d.height(d.height());for(var a=t.length-1;a>=0;a--)e=t.eq(a),e.css({position:"absolute",left:e.position().left,top:e.position().top})}},m=function(){var t=p();f=t,g();for(var a,n,o=d.children("li"),i=[],s=[],r=0,l=o.eq(0).outerWidth(!0),h=o.eq(0).width(),c=function(){var e=0,t=i[0];for(a=1;a<i.length;a++)i[a]<t&&(t=i[a],e=a);return e},a=0;f>a;a++)i[a]=0,s[a]=a*l;o.each(function(){a=c(),n=e(this).data(J.OBJ),e(this).css({left:s[a],top:i[a]}).children("a.thumb").height(h*n[J.THUMB][J.HEIGHT]/n[J.THUMB][J.WIDTH]),i[a]+=e(this).outerHeight(!0),r=Math.max(r,i[a])}),d.height(r),b()},b=function(){if(d.is(":visible")){var a=d.find("li a.lazyload"),n=e(t).height(),o=e(t).scrollTop();a.each(function(){var t=e(this).offset().top,a=e(this).height();o+n>t&&t+a>o&&v(e(this).removeClass("lazyload"))})}},y=function(t){return"A"===t.target.nodeName?!0:(d.trigger("lightboxLoad",d.children("li").index(e(t.currentTarget))),!1)},v=function(t){t.append(e("<img>",{src:Album.getThumbPath(t.closest("li").data(J.OBJ)),"class":"hide-image"}).on("load",function(){e(this).addClass("show-image").removeClass("hide-image")}))};return l||e(this).closest("article").data("oly_ns",l="oly_"+Math.floor(1e4*Math.random())),r.append(e("<div>",{"class":"progressbar"})),u(),a.fixGrid&&(m(!0),e(t).on("resize."+l,function(){return clearTimeout(c),c=setTimeout(m,500),!0})),b(),e(t).on("scroll."+l+" resize."+l,function(){return clearTimeout(h),h=setTimeout(b,50),!0}),r.on("setActive",function(a,n){if(n){var n=e(n),o=e(t).height(),i=e(t).scrollTop(),s=n.offset().top,r=n.outerHeight();s+r>i+o?e("html, body").stop(!0,!1).animate({scrollTop:Math.round(s-o+r+30)+"px"}):i>s&&e("html, body").stop(!0,!1).animate({scrollTop:Math.round(Math.max(s-30,0))+"px"})}}),e.isFunction(s)&&("undefined"!=typeof auto?s.call(n,d,auto):s.call(n,d)),r.find(".progressbar").remove(),this};var y=function(n,o){var s=l({articleClass:"tags-found",icon:"icon-label",title:"&ldquo;"+n+"&rdquo;"}),r=s.find("header h4");r.append(e("<span>",{"class":"progressbar"})),(s.offset().top<e(t).scrollTop()||s.offset().top>e(t).scrollTop()+e(t).height()-100)&&e(t).scrollTop(s.offset().top),Album.collectItems(e.extend(a.tagCloud,{exact:!0,terms:n,ready:function(){r.find(".progressbar").remove(),r.append(e("<small>",{text:this.length?i.foundNTimes.replace("{0}",this.length):i.notFound})),s.renderThumbs(this,I),o&&o.call()}}))},v=function(t){if(t.length){var n=e(a.tagCloud.hook);if(n.length)for(var o,s,r,l=function(){var t=e(this).children("span").eq(0).text();return t&&t.length>1&&y(t,function(){setParam({label:t},i.label+": "+t),z()}),!1},h=0,c=t.length;c>h;h++){if(o=e("<a>",{"class":"tag"}).append(e("<span>",{text:t[h][0]})),o.on("click",l),t[h][1]>1){for(s=0,r=Math.min(64,t[h][1]);r>1;)s++,r>>=1;o.addClass("size-"+s),o.append("&nbsp;").append(e("<sup>",{text:t[h][1]}))}n.append(o)}}},w=function(t,n){var o=l({articleClass:"search-results",icon:"icon-search",title:"&ldquo;"+t+"&rdquo;"}),s=o.find("header h4");s.append(e("<span>",{"class":"progressbar"})),setTimeout(function(){Album.collectItems(e.extend(a.search,{terms:t,ready:function(){s.find(".progressbar").remove(),s.append(e("<small>",{text:this.length?i.foundNTimes.replace("{0}",this.length):i.notFound})),o.renderThumbs(this,I),n&&n.call()}}))},50)},P=function(t){if(t.length){a.search=e.extend({depth:"tree",fields:"creator,keywords,title,comment"},a.search);var n="active",o=function(e){var t=e.find("input").eq(0).val();return t&&t.length>1&&w(t,function(){setParam({search:t},i.search+": "+t),z()}),!1};t.find(".search-btn, button").on("click",function(){return t.hasClass(n)?(o(t),t.removeClass(n)):(t.find("input").eq(0).focus(),t.addClass(n)),!1}),t.on("submit",function(e){return e.preventDefault(),o(t),t.removeClass(n),!1}),t.find("input").on({focus:function(){t.addClass(n)}})}},k=function(){var t=e(a.tagCloud.hook).next("form");if(t.length){var n=function(e){var t=e.find("input").eq(0).val();return t&&t.length>1&&y(t,function(){setParam({label:t},i.label+": "+t),z()}),!1};t.find(".search-btn, button").on("click",function(){return t.find("input").eq(0).focus(),n(t),!1}),t.on("submit",function(e){return e.preventDefault(),n(t),!1})}},C=function(e){return"dateTaken"==e?i.imagesTaken:"fileModified"==e?i.imagesModified:i.imagesAdded},T=function(t,n){var o=l({articleClass:"search-results",icon:"icon-star",title:C(a.searchNew.reference)+" "+getTimespan(t)}),s=o.find("header h4");s.append(e("<span>",{"class":"progressbar"})),setTimeout(function(){Album.collectByDate(e.extend(a.searchNew,{range:t,ready:function(){s.find(".progressbar").remove(),s.append(e("<small>",{text:this.length?i.foundNTimes.replace("{0}",this.length):i.notFound})),o.renderThumbs(this,I),n&&n.call()}}))},50)},x=function(e){return e&&T(e,function(){setParam({newimages:e},C(a.searchNew.reference)+" "+getTimespan(e)),z()}),!1},O=function(t){if(t.length){a.searchNew=e.extend({days:"3,30,90",depth:"folder",reference:"added",sinceLastVisit:!0},a.searchNew);var n=a.searchNew.days.split(",");t.append(e("<span>",{text:C(a.searchNew.reference)}));for(var o=0;o<n.length;o++)t.append(e("<a>",{"class":"btn",text:getTimespan(n[o])}).data("days",parseInt(n[o],10)).on("click",function(){x(e(this).data("days"))}));if(a.searchNew.sinceLastVisit){var s=e.cookie("lastVisit"),r=Math.ceil(new Date/864e5);s&&r>s&&t.append(e("<a>",{"class":"btn",text:i.sinceMyLastVisit}).on("click",function(){x(r-s)})),e.cookie("lastVisit",r,31536e4)}}},I=function(n,o){a.hasOwnProperty("shop")&&n.selectable(),n.trigger("lightboxRemove"),n.lightbox({auto:"undefined"==typeof o?!1:o,onLoadStart:function(e){var t=e.data(J.OBJ);t&&addParam({img:Album.getItemName(t)},t[J.TITLE])},onLoadEnd:function(e){n.trigger("setActive",e)},onEnd:function(){removeParam("img")},onReady:function(){if(r&&t.location.hash){r=!1;var e=readParam();if(e.hasOwnProperty("label"))y(e.label,function(){addParam({label:e.label,search:null,newimages:null},i.label+": "+e.label)});else if(e.hasOwnProperty("search"))w(e.search,function(){addParam({search:e.search,label:null,newimages:null},i.search+": "+e.search)});else if(e.hasOwnProperty("newimages"))T(e.newimages,function(){addParam({newimages:e.newimages,search:null,label:null},i.searchNew+": "+e.searchNew)});else if(e.hasOwnProperty("img")){var a=u(e.img);a.length?d().trigger("lightboxLoad",a):removeParam("img")}}},onSlideshowStart:function(){a.hasOwnProperty("backgroundMusic")&&a.backgroundMusic.slideshowControl&&e(a.backgroundMusic.hook).trigger("startPlayer")},onSlideshowPause:function(){a.hasOwnProperty("backgroundMusic")&&a.backgroundMusic.slideshowControl&&e(a.backgroundMusic.hook).trigger("pausePlayer")}})},A=function(){var n=Album.getImages();a.hasOwnProperty("skipFirst")&&(n=n.slice(a.skipFirst)),n.length?c().renderThumbs(n,I):t.location.hash&&L(),a.hasOwnProperty("tagCloud")&&(k(a.tagCloud),Album.collectTags(e.extend(a.tagCloud,{ready:function(){v(this)}})))},M=function(){},N=function(){var n=null;e("."+a.foldersClass+" .preload img").each(function(){var t=e(this);t.load(function(){g(t.closest("li"))})}),b(),e(t).on("scroll resize orientationchange",function(){return clearTimeout(n),n=setTimeout(b,50),!0}),e(t).on("orientationchange",function(){return e("."+a.foldersClass+" li").height("auto"),!0})},q=function(){if(!e.cookie("cookiePolicy")){var t=e("<div>",{id:"cookiepolicy"}).appendTo("body"),n=e("<p>",{html:i.cookiePolicyText}).appendTo(t);a.cookiePolicyUrl&&n.append(e("<a>",{text:i.cookiePolicyLearnMore,target:"_blank",href:a.cookiePolicyUrl})),n.append(e("<a>",{"class":"btn",text:i.cookiePolicyAgree}).on("click",function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()}),e.cookie("cookiePolicy",!0,36e6)})),t.fadeIn(500),setTimeout(function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()})},6e3)}},L=function(){if(t.location.hash!==s){s=t.location.hash;var e=readParam();if(e.hasOwnProperty("label"))y(e.label,function(){setParam({label:e.label},i.label+": "+e.label),z()});else if(e.hasOwnProperty("search"))w(e.search,function(){setParam({search:e.search},i.search+": "+e.search),z()});else if(e.hasOwnProperty("newimages"))T(e.newimages,function(){setParam({newimages:e.newimages},i.newImages+": "+e.newimages),z()});else if(e.hasOwnProperty("img")){var a=u(e.img);a.length?d().trigger("lightboxLoad",a):removeParam("img")}else d().trigger("lightboxQuit"),h(),z()}},z=function(){a.hasOwnProperty("share")&&d().trigger("lightboxContainer").is(":visible")&&e(a.share.hook).trigger("updateLinks")},H=function(){return e(a.shop.hook+" a").length?i.itemsInShoppingCart:n};if(typeof Album!==n&&Album.init({rootPath:a.rootPath,relPath:a.relPath,ready:"index"===a.pageType?A:M}),a.hasOwnProperty("showCookiePolicy")&&a.showCookiePolicy&&setTimeout(q,2e3),t.location.search&&removeSearch(),e("."+a.foldersClass).length&&N(),a.rightClickProtect&&e(".folder-cont img, .slider img").on("contextmenu",function(e){return e.preventDefault(),!1}),a.hasOwnProperty("search")&&P(e(a.search.hook)),a.hasOwnProperty("printImage")&&(e.fn.lightbox.defaults.printImage=a.printImage),a.hasOwnProperty("share")&&(e(a.share.hook).renderShares(a.share),e.fn.lightbox.defaults.share=a.share.sites),a.hasOwnProperty("searchNew")&&O(e(a.searchNew.hook)),a.hasOwnProperty("map")&&(a.map.hasOwnProperty("type")&&(e.fn.lightbox.defaults.mapType=a.map.type),a.map.hasOwnProperty("zoom")&&(e.fn.lightbox.defaults.mapZoom=a.map.zoom),a.map.hasOwnProperty("apiKey")&&(t.googleApiKey=a.map.apiKey)),a.hasOwnProperty("backgroundMusic")&&e(a.backgroundMusic.hook).audioPlayer(e.extend({rootPath:a.rootPath},a.backgroundMusic)),a.hasOwnProperty("speed")&&(e.fn.lightbox.defaults.speed=a.speed),a.hasOwnProperty("slideshowDelay")&&(e.fn.lightbox.defaults.slideshowDelay=a.slideshowDelay),a.hasOwnProperty("fitImages")&&(e.fn.lightbox.defaults.fitImages=a.fitImages),a.hasOwnProperty("extraSizes")&&(e.fn.lightbox.defaults.extraSizes=a.extraSizes),a.hasOwnProperty("videoAuto")&&(e.fn.lightbox.defaults.videoAuto=a.videoAuto),a.hasOwnProperty("rightClickProtect")&&(e.fn.lightbox.defaults.rightClickProtect=a.rightClickProtect),a.hasOwnProperty("slideshowDelay")&&(e.fn.lightbox.defaults.enableKeyboard=a.enableKeyboard),typeof Newsfeed!==n&&a.hasOwnProperty("newsfeed")&&Newsfeed.init(a.newsfeed),typeof Instafeed!==n&&!LOCAL&&a.hasOwnProperty("instagram")){var S=new Instafeed({get:"user",userId:parseInt(a.instagram.token.split(".")[0],10),accessToken:a.instagram.token,limit:a.instagram.limit});S.run()}a.hasOwnProperty("shop")&&(e(a.shop.buttons.selectAll).on("click",function(){return d().trigger("selectAll")}),e(a.shop.buttons.selectNone).on("click",function(){return d().trigger("selectNone")}),e(a.shop.buttons.addSelected).on("click",function(){return e(a.shop.hook).trigger("addItems",f(!0)),d().trigger("selectNone"),!1}),e(a.shop.buttons.addAll).on("click",function(){return e(a.shop.hook).trigger("addItems",p()),!1}),e(a.shop.hook).addShop(a.shop),e.fn.lightbox.defaults.shop={hook:a.shop.hook},e(t).on("beforeunload",H)),e(t).on("hashchange",L)},e.fn.skin.defaults={articleHook:"article#main-cont",thumbContClass:"thumb-cont",foldersClass:"folders",thumbsClass:"thumbnails",fixGrid:!1,fitImages:!1,rightClickProtect:!1,enableKeyboard:!0,videoAuto:!0}}(jQuery,window,document);
